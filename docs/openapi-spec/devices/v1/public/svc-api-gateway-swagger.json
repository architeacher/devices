{
  "openapi": "3.0.3",
  "info": {
    "title": "Devices API Gateway",
    "description": "A REST API for managing device resources with full CRUD operations and filtering capabilities.\n\n## Device Domain\n\nEach device contains:\n- **Id**: Unique identifier (UUID v7)\n- **Name**: Device name\n- **Brand**: Device manufacturer/brand\n- **State**: Current state (available, in-use, inactive)\n- **Creation Time**: Timestamp when the device was created\n\n## Business Rules\n\n- Creation time cannot be updated\n- Name and brand properties cannot be updated if the device is in use\n- In-use devices cannot be deleted\n\n## API Versioning\n\nThis API uses semantic versioning and supports multiple versioning strategies:\n\n### Version Strategy\n- **URL Path Versioning**: `/v1/` (primary method)\n- **Header Versioning**: `API-Version: v1` header (alternative)\n\n### Version Information\n- All responses include `API-Version` header indicating the version used\n- Version-specific changes are documented in the changelog\n- Breaking changes require major version increment\n\n## Security\n\nThis API uses PASETO token authentication:\n- **PASETO tokens**: Platform-Agnostic Security Tokens - secure, stateless authentication\n\n## Security Headers\n\nAll responses include standard security headers:\n- `X-Content-Type-Options: nosniff`\n- `X-Frame-Options: DENY`\n- `X-XSS-Protection: 1; mode=block`\n- `Strict-Transport-Security: max-age=31536000; includeSubDomains`\n- `Content-Security-Policy: default-src 'self'`\n- `Referrer-Policy: strict-origin-when-cross-origin`\n- `Permissions-Policy: camera=(), microphone=(), geolocation=()`\n",
    "version": "1.0.0",
    "contact": {
      "name": "Devices API Support",
      "url": "https://github.com/architeacher/devices"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "https://api.devices.dev/{version}",
      "description": "Local development server",
      "variables": {
        "version": {
          "default": "v1",
          "enum": [
            "v1"
          ],
          "description": "The API version to use"
        }
      }
    },
    {
      "url": "https://api.devices.com/{version}",
      "description": "Production server",
      "variables": {
        "version": {
          "default": "v1",
          "enum": [
            "v1"
          ],
          "description": "The API version to use"
        }
      }
    }
  ],
  "security": [
    {
      "PasetoAuth": []
    }
  ],
  "tags": [
    {
      "name": "Devices",
      "description": "Device management operations"
    },
    {
      "name": "System",
      "description": "System liveness, readiness, and health probes"
    }
  ],
  "paths": {
    "/devices": {
      "post": {
        "summary": "Create a new device",
        "description": "Creates a new device resource. The device will be assigned a unique UUID v7 identifier\nand the creation time will be automatically set to the current timestamp.\n",
        "operationId": "createDevice",
        "tags": [
          "Devices"
        ],
        "security": [
          {
            "PasetoAuth": []
          }
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "PASETO v4 bearer token for authentication.\nFormat: Bearer v4.public.{payload}.{signature}\n",
            "schema": {
              "type": "string",
              "pattern": "^Bearer v4\\.(public|local)\\..+$"
            },
            "example": "Bearer v4.public.eyJleHAiOiIyMDI0LTAxLTE1VDEyOjAwOjAwWiIsImlhdCI6IjIwMjQtMDEtMTVUMTA6MDA6MDBaIiwic3ViIjoiMDE5MjM0YTUtNmI3Yy04ZDllLTBmMTItMzQ1Njc4OTBhYmNkIn0.signature"
          },
          {
            "name": "API-Version",
            "in": "header",
            "required": false,
            "description": "API version to use for this request. If not specified, defaults to v1.\nSupported versions: v1\n",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ],
              "default": "v1"
            },
            "example": "v1"
          },
          {
            "name": "Request-Id",
            "in": "header",
            "required": false,
            "description": "Unique request identifier for tracing and debugging purposes (per-request, always generated server-side).\nRFC 6648 compliant (no X- prefix).\n",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          {
            "name": "traceparent",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context header for distributed tracing (OpenTelemetry compatible).\n\nFormat: `{version}-{trace-id}-{parent-id}-{trace-flags}`\n- version: 2 hex digits (always \"00\")\n- trace-id: 32 hex digits (16 bytes)\n- parent-id: 16 hex digits (8 bytes)\n- trace-flags: 2 hex digits (sampling flag)\n\nIf not provided, the server will generate a new trace context.\n",
            "schema": {
              "type": "string",
              "pattern": "^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9a-f]{2}$"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          {
            "name": "tracestate",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context state header for vendor-specific trace data.\nComma-separated list of key=value pairs.\n",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE,rojo=00f067aa0ba902b7"
          },
          {
            "name": "Idempotency-Key",
            "in": "header",
            "required": true,
            "description": "Unique key to ensure idempotent POST requests.\nIf the same key is sent again within the TTL window (24 hours),\nthe server returns the cached response instead of creating a duplicate.\n\n**Requirements:**\n- Must be a valid UUID v7\n- Must be unique per logical operation\n- Cached for 24 hours\n",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          {
            "name": "Accept",
            "in": "header",
            "required": false,
            "description": "Media type(s) acceptable for the response.\nCurrently only `application/json` is supported.\n\nIf not specified, defaults to `application/json`.\nIf an unsupported media type is requested, returns 406 Not Acceptable.\n",
            "schema": {
              "type": "string",
              "default": "application/json"
            },
            "example": "application/json"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Request body for creating a new device",
                "required": [
                  "name",
                  "brand"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "The name of the device",
                    "minLength": 1,
                    "maxLength": 255,
                    "example": "iPhone 15 Pro"
                  },
                  "brand": {
                    "type": "string",
                    "description": "The brand/manufacturer of the device",
                    "minLength": 1,
                    "maxLength": 100,
                    "example": "Apple"
                  },
                  "state": {
                    "description": "Initial state of the device (defaults to \"available\" if not provided)",
                    "default": "available",
                    "type": "string",
                    "enum": [
                      "available",
                      "in-use",
                      "inactive"
                    ],
                    "example": "available",
                    "x-enum-descriptions": {
                      "available": "Device is available for use",
                      "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
                      "inactive": "Device is inactive and not available for use"
                    }
                  }
                }
              },
              "examples": {
                "basic": {
                  "summary": "Create a new device with default state",
                  "value": {
                    "name": "iPhone 15 Pro",
                    "brand": "Apple"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Device created successfully",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Location": {
                "description": "URI of the newly created resource",
                "schema": {
                  "type": "string",
                  "format": "uri"
                },
                "example": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "RateLimit-Limit": {
                "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 100
              },
              "RateLimit-Remaining": {
                "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 95
              },
              "RateLimit-Reset": {
                "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 1705320000
              },
              "Content-Encoding": {
                "description": "Compression algorithm used for the response body",
                "schema": {
                  "type": "string",
                  "enum": [
                    "gzip",
                    "deflate",
                    "br",
                    "identity"
                  ]
                },
                "example": "gzip"
              },
              "Vary": {
                "description": "Headers that affect response caching and content negotiation",
                "schema": {
                  "type": "string"
                },
                "example": "Accept-Encoding, Authorization"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Response containing a single device",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "object",
                      "description": "A device resource",
                      "required": [
                        "id",
                        "name",
                        "brand",
                        "state",
                        "createdAt"
                      ],
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid",
                          "description": "Unique identifier for the device (UUID v7)",
                          "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                        },
                        "name": {
                          "type": "string",
                          "description": "The name of the device",
                          "minLength": 1,
                          "maxLength": 255,
                          "example": "iPhone 15 Pro"
                        },
                        "brand": {
                          "type": "string",
                          "description": "The brand/manufacturer of the device",
                          "minLength": 1,
                          "maxLength": 100,
                          "example": "Apple"
                        },
                        "state": {
                          "type": "string",
                          "description": "The current state of the device",
                          "enum": [
                            "available",
                            "in-use",
                            "inactive"
                          ],
                          "example": "available",
                          "x-enum-descriptions": {
                            "available": "Device is available for use",
                            "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
                            "inactive": "Device is inactive and not available for use"
                          }
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Timestamp when the device was created (immutable)",
                          "example": "2024-01-15T10:30:00Z"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Timestamp when the device was last updated",
                          "example": "2024-01-15T14:45:00Z"
                        },
                        "links": {
                          "type": "object",
                          "description": "HATEOAS links for device navigation",
                          "properties": {
                            "self": {
                              "type": "string",
                              "format": "uri-reference",
                              "description": "Link to this device resource",
                              "example": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "created": {
                    "summary": "Newly created device",
                    "value": {
                      "data": {
                        "id": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                        "name": "iPhone 15 Pro",
                        "brand": "Apple",
                        "state": "available",
                        "createdAt": "2024-01-15T10:30:00Z",
                        "updatedAt": "2024-01-15T10:30:00Z",
                        "links": {
                          "self": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - The request was malformed or contains invalid syntax",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "invalid_json": {
                    "summary": "Invalid JSON syntax",
                    "value": {
                      "code": "BAD_REQUEST",
                      "message": "Invalid JSON syntax in request body",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "missing_content_type": {
                    "summary": "Missing Content-Type header",
                    "value": {
                      "code": "BAD_REQUEST",
                      "message": "Content-Type header must be application/json",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication is required or has failed",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "WWW-Authenticate": {
                "description": "Authentication scheme information",
                "schema": {
                  "type": "string"
                },
                "example": "Bearer realm=\"devices-api\""
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "missing_token": {
                    "summary": "Missing authentication token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is required",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "invalid_token": {
                    "summary": "Invalid or expired token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is invalid or expired",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable - The requested media type is not supported",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "unsupported_media_type": {
                    "summary": "Requested media type not supported",
                    "value": {
                      "code": "NOT_ACCEPTABLE",
                      "message": "The requested media type is not supported. Supported: application/json",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "Accept",
                          "message": "Unsupported media type: application/xml",
                          "code": "UNSUPPORTED_MEDIA_TYPE"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity - The request was well-formed but contains semantic errors",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "validation_error": {
                    "summary": "Validation errors",
                    "value": {
                      "code": "VALIDATION_ERROR",
                      "message": "The request body contains validation errors",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "name",
                          "message": "name is required",
                          "code": "REQUIRED_FIELD"
                        },
                        {
                          "field": "brand",
                          "message": "brand must be between 1 and 100 characters",
                          "code": "INVALID_LENGTH"
                        }
                      ]
                    }
                  },
                  "invalid_state": {
                    "summary": "Invalid state value",
                    "value": {
                      "code": "VALIDATION_ERROR",
                      "message": "The request body contains validation errors",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "state",
                          "message": "state must be one of: available, in-use, inactive",
                          "code": "INVALID_ENUM_VALUE"
                        }
                      ]
                    }
                  },
                  "invalid_uuid": {
                    "summary": "Invalid UUID format",
                    "value": {
                      "code": "VALIDATION_ERROR",
                      "message": "The request contains an invalid identifier",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "deviceId",
                          "message": "deviceId must be a valid UUID",
                          "code": "INVALID_FORMAT"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit has been exceeded",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "Retry-After": {
                "description": "Number of seconds to wait before retrying the request",
                "schema": {
                  "type": "integer"
                },
                "example": 60
              },
              "RateLimit-Limit": {
                "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 100
              },
              "RateLimit-Remaining": {
                "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 95
              },
              "RateLimit-Reset": {
                "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 1705320000
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "rate_limited": {
                    "summary": "Rate limit exceeded",
                    "value": {
                      "code": "RATE_LIMIT_EXCEEDED",
                      "message": "Rate limit exceeded. Please retry after 60 seconds",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - An unexpected error occurred",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "internal_error": {
                    "summary": "Internal server error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "An unexpected error occurred. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "database_error": {
                    "summary": "Database connection error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "Service temporarily unavailable. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "get": {
        "summary": "List all devices",
        "description": "Retrieves a paginated list of all devices. Supports filtering by brand and state.\n",
        "operationId": "listDevices",
        "tags": [
          "Devices"
        ],
        "security": [
          {
            "PasetoAuth": []
          }
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "PASETO v4 bearer token for authentication.\nFormat: Bearer v4.public.{payload}.{signature}\n",
            "schema": {
              "type": "string",
              "pattern": "^Bearer v4\\.(public|local)\\..+$"
            },
            "example": "Bearer v4.public.eyJleHAiOiIyMDI0LTAxLTE1VDEyOjAwOjAwWiIsImlhdCI6IjIwMjQtMDEtMTVUMTA6MDA6MDBaIiwic3ViIjoiMDE5MjM0YTUtNmI3Yy04ZDllLTBmMTItMzQ1Njc4OTBhYmNkIn0.signature"
          },
          {
            "name": "API-Version",
            "in": "header",
            "required": false,
            "description": "API version to use for this request. If not specified, defaults to v1.\nSupported versions: v1\n",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ],
              "default": "v1"
            },
            "example": "v1"
          },
          {
            "name": "Request-Id",
            "in": "header",
            "required": false,
            "description": "Unique request identifier for tracing and debugging purposes (per-request, always generated server-side).\nRFC 6648 compliant (no X- prefix).\n",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          {
            "name": "traceparent",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context header for distributed tracing (OpenTelemetry compatible).\n\nFormat: `{version}-{trace-id}-{parent-id}-{trace-flags}`\n- version: 2 hex digits (always \"00\")\n- trace-id: 32 hex digits (16 bytes)\n- parent-id: 16 hex digits (8 bytes)\n- trace-flags: 2 hex digits (sampling flag)\n\nIf not provided, the server will generate a new trace context.\n",
            "schema": {
              "type": "string",
              "pattern": "^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9a-f]{2}$"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          {
            "name": "tracestate",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context state header for vendor-specific trace data.\nComma-separated list of key=value pairs.\n",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE,rojo=00f067aa0ba902b7"
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "description": "Page number for pagination (1-indexed)",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "example": 1
          },
          {
            "name": "size",
            "in": "query",
            "required": false,
            "description": "Number of items per page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "example": 20
          },
          {
            "name": "brand",
            "in": "query",
            "required": false,
            "description": "Filter by brand(s). Comma-separated for OR matching.\nExample: ?brand=Apple,Samsung\n",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1,
                "maxLength": 100
              },
              "maxItems": 10
            },
            "style": "form",
            "explode": false,
            "example": "Apple"
          },
          {
            "name": "state",
            "in": "query",
            "required": false,
            "description": "Filter by state(s). Comma-separated for OR matching.\nExample: ?state=available,inactive\n",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "description": "The current state of the device",
                "enum": [
                  "available",
                  "in-use",
                  "inactive"
                ],
                "example": "available",
                "x-enum-descriptions": {
                  "available": "Device is available for use",
                  "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
                  "inactive": "Device is inactive and not available for use"
                }
              },
              "maxItems": 3
            },
            "style": "form",
            "explode": false,
            "example": "available"
          },
          {
            "name": "sort",
            "in": "query",
            "required": false,
            "description": "Fields to sort results by. Comma-separated for multi-field sorting.\nPrefix with `-` for descending order.\nSupported fields: name, brand, state, createdAt, updatedAt\nExample: ?sort=-createdAt,name (sort by createdAt DESC, then name ASC)\n",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "pattern": "^-?(name|brand|state|createdAt|updatedAt)$"
              },
              "maxItems": 5,
              "default": [
                "-createdAt"
              ]
            },
            "style": "form",
            "explode": false,
            "example": "-createdAt,name"
          },
          {
            "name": "fields",
            "in": "query",
            "required": false,
            "description": "Field projection to control which fields are returned in the response.\n\n**Default behavior (no fields parameter):**\nReturns essential fields only: `id`, `name`, `brand`, `state`\n\n**With fields parameter:**\nReturns only the specified fields. Use comma-separated list.\n\n**Supported fields:**\n- `id` - Device unique identifier (always included)\n- `name` - Device name\n- `brand` - Device manufacturer\n- `state` - Device state (available, in-use, inactive)\n- `createdAt` - Creation timestamp\n- `updatedAt` - Last update timestamp\n- `links` - HATEOAS navigation links\n\n**Nested fields syntax:**\nUse `field:(subfield1,subfield2)` for nested objects.\nExample: `links:(self)` returns only the self link.\n",
            "schema": {
              "type": "string",
              "pattern": "^[a-zA-Z,:()]+$"
            },
            "examples": {
              "essential": {
                "value": "id,name,brand,state",
                "summary": "Essential fields only"
              },
              "withTimestamps": {
                "value": "id,name,brand,state,createdAt,updatedAt",
                "summary": "Include timestamps"
              },
              "withLinks": {
                "value": "id,name,state,links:(self)",
                "summary": "Include HATEOAS links"
              }
            }
          },
          {
            "name": "If-None-Match",
            "in": "header",
            "required": false,
            "description": "ETag value for conditional requests.\nFor GET: Returns 304 Not Modified if the resource hasn't changed.\nFor PUT/PATCH: Prevents updates if resource exists (use \"*\").\n",
            "schema": {
              "type": "string"
            },
            "example": "\"a1b2c3d4e5f6\""
          },
          {
            "name": "Accept-Encoding",
            "in": "header",
            "required": false,
            "description": "Accepted compression algorithms for the response.\nServer will use the best matching algorithm.\n",
            "schema": {
              "type": "string"
            },
            "example": "gzip, deflate, br"
          },
          {
            "name": "Accept",
            "in": "header",
            "required": false,
            "description": "Media type(s) acceptable for the response.\nCurrently only `application/json` is supported.\n\nIf not specified, defaults to `application/json`.\nIf an unsupported media type is requested, returns 406 Not Acceptable.\n",
            "schema": {
              "type": "string",
              "default": "application/json"
            },
            "example": "application/json"
          }
        ],
        "responses": {
          "200": {
            "description": "List of devices retrieved successfully",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "ETag": {
                "description": "Entity tag for cache validation and optimistic concurrency control.\nUse this value in If-Match or If-None-Match headers for subsequent requests.\n",
                "schema": {
                  "type": "string"
                },
                "example": "\"a1b2c3d4e5f6\""
              },
              "Cache-Control": {
                "description": "Cache directives for the response.\n- `private`: Response is specific to the user\n- `max-age`: Maximum time in seconds the response can be cached\n- `no-cache`: Must revalidate with server before using cached response\n",
                "schema": {
                  "type": "string"
                },
                "example": "private, max-age=300"
              },
              "RateLimit-Limit": {
                "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 100
              },
              "RateLimit-Remaining": {
                "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 95
              },
              "RateLimit-Reset": {
                "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 1705320000
              },
              "Content-Encoding": {
                "description": "Compression algorithm used for the response body",
                "schema": {
                  "type": "string",
                  "enum": [
                    "gzip",
                    "deflate",
                    "br",
                    "identity"
                  ]
                },
                "example": "gzip"
              },
              "Vary": {
                "description": "Headers that affect response caching and content negotiation",
                "schema": {
                  "type": "string"
                },
                "example": "Accept-Encoding, Authorization"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Response containing a paginated list of devices",
                  "required": [
                    "data",
                    "pagination"
                  ],
                  "properties": {
                    "data": {
                      "type": "array",
                      "description": "List of devices",
                      "items": {
                        "type": "object",
                        "description": "A device resource",
                        "required": [
                          "id",
                          "name",
                          "brand",
                          "state",
                          "createdAt"
                        ],
                        "properties": {
                          "id": {
                            "type": "string",
                            "format": "uuid",
                            "description": "Unique identifier for the device (UUID v7)",
                            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                          },
                          "name": {
                            "type": "string",
                            "description": "The name of the device",
                            "minLength": 1,
                            "maxLength": 255,
                            "example": "iPhone 15 Pro"
                          },
                          "brand": {
                            "type": "string",
                            "description": "The brand/manufacturer of the device",
                            "minLength": 1,
                            "maxLength": 100,
                            "example": "Apple"
                          },
                          "state": {
                            "type": "string",
                            "description": "The current state of the device",
                            "enum": [
                              "available",
                              "in-use",
                              "inactive"
                            ],
                            "example": "available",
                            "x-enum-descriptions": {
                              "available": "Device is available for use",
                              "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
                              "inactive": "Device is inactive and not available for use"
                            }
                          },
                          "createdAt": {
                            "type": "string",
                            "format": "date-time",
                            "description": "Timestamp when the device was created (immutable)",
                            "example": "2024-01-15T10:30:00Z"
                          },
                          "updatedAt": {
                            "type": "string",
                            "format": "date-time",
                            "description": "Timestamp when the device was last updated",
                            "example": "2024-01-15T14:45:00Z"
                          },
                          "links": {
                            "type": "object",
                            "description": "HATEOAS links for device navigation",
                            "properties": {
                              "self": {
                                "type": "string",
                                "format": "uri-reference",
                                "description": "Link to this device resource",
                                "example": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
                              }
                            }
                          }
                        }
                      }
                    },
                    "pagination": {
                      "type": "object",
                      "description": "Pagination metadata for list responses",
                      "required": [
                        "page",
                        "size",
                        "totalItems",
                        "totalPages"
                      ],
                      "properties": {
                        "page": {
                          "type": "integer",
                          "description": "Current page number (1-indexed)",
                          "minimum": 1,
                          "example": 1
                        },
                        "size": {
                          "type": "integer",
                          "description": "Number of items per page",
                          "minimum": 1,
                          "maximum": 100,
                          "example": 20
                        },
                        "totalItems": {
                          "type": "integer",
                          "description": "Total number of items across all pages",
                          "minimum": 0,
                          "example": 150
                        },
                        "totalPages": {
                          "type": "integer",
                          "description": "Total number of pages",
                          "minimum": 0,
                          "example": 8
                        },
                        "hasNext": {
                          "type": "boolean",
                          "description": "Whether there is a next page",
                          "example": true
                        },
                        "hasPrevious": {
                          "type": "boolean",
                          "description": "Whether there is a previous page",
                          "example": false
                        },
                        "links": {
                          "type": "object",
                          "description": "HATEOAS links for pagination navigation",
                          "properties": {
                            "self": {
                              "type": "string",
                              "format": "uri-reference",
                              "description": "Link to the current page",
                              "example": "/devices?page=1&size=20"
                            },
                            "first": {
                              "type": "string",
                              "format": "uri-reference",
                              "description": "Link to the first page",
                              "example": "/devices?page=1&size=20"
                            },
                            "last": {
                              "type": "string",
                              "format": "uri-reference",
                              "description": "Link to the last page",
                              "example": "/devices?page=8&size=20"
                            },
                            "next": {
                              "type": "string",
                              "format": "uri-reference",
                              "nullable": true,
                              "description": "Link to the next page (null if on last page)",
                              "example": "/devices?page=2&size=20"
                            },
                            "previous": {
                              "type": "string",
                              "format": "uri-reference",
                              "nullable": true,
                              "description": "Link to the previous page (null if on first page)",
                              "example": null
                            }
                          }
                        }
                      }
                    },
                    "filters": {
                      "type": "object",
                      "description": "Filters that were applied to this request",
                      "properties": {
                        "brand": {
                          "type": "string",
                          "nullable": true,
                          "description": "Brand filter that was applied",
                          "example": "Apple"
                        },
                        "state": {
                          "type": "string",
                          "nullable": true,
                          "description": "State filter that was applied",
                          "enum": [
                            "available",
                            "in-use",
                            "inactive"
                          ],
                          "example": "available"
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "list": {
                    "summary": "List of devices",
                    "value": {
                      "data": [
                        {
                          "id": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                          "name": "iPhone 15 Pro",
                          "brand": "Apple",
                          "state": "available",
                          "createdAt": "2024-01-15T10:30:00Z",
                          "updatedAt": "2024-01-15T10:30:00Z",
                          "links": {
                            "self": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
                          }
                        },
                        {
                          "id": "019234a5-6b7c-8d9e-0f12-34567890abce",
                          "name": "Galaxy S24 Ultra",
                          "brand": "Samsung",
                          "state": "in-use",
                          "createdAt": "2024-01-14T08:15:00Z",
                          "updatedAt": "2024-01-15T09:00:00Z",
                          "links": {
                            "self": "/devices/019234a5-6b7c-8d9e-0f12-34567890abce"
                          }
                        },
                        {
                          "id": "019234a5-6b7c-8d9e-0f12-34567890abcf",
                          "name": "Pixel 8 Pro",
                          "brand": "Google",
                          "state": "inactive",
                          "createdAt": "2024-01-13T14:20:00Z",
                          "updatedAt": "2024-01-13T14:20:00Z",
                          "links": {
                            "self": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcf"
                          }
                        }
                      ],
                      "pagination": {
                        "page": 1,
                        "size": 20,
                        "totalItems": 3,
                        "totalPages": 1,
                        "hasNext": false,
                        "hasPrevious": false,
                        "links": {
                          "self": "/devices?page=1&size=20",
                          "first": "/devices?page=1&size=20",
                          "last": "/devices?page=1&size=20",
                          "next": null,
                          "previous": null
                        }
                      },
                      "filters": {
                        "brand": null,
                        "state": null
                      }
                    }
                  }
                }
              }
            }
          },
          "304": {
            "description": "Not Modified - Resource unchanged since last request (ETag matched)",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "ETag": {
                "description": "Entity tag for cache validation and optimistic concurrency control.\nUse this value in If-Match or If-None-Match headers for subsequent requests.\n",
                "schema": {
                  "type": "string"
                },
                "example": "\"a1b2c3d4e5f6\""
              },
              "Cache-Control": {
                "description": "Cache directives for the response.\n- `private`: Response is specific to the user\n- `max-age`: Maximum time in seconds the response can be cached\n- `no-cache`: Must revalidate with server before using cached response\n",
                "schema": {
                  "type": "string"
                },
                "example": "private, max-age=300"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            }
          },
          "400": {
            "description": "Bad Request - The request was malformed or contains invalid syntax",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "invalid_json": {
                    "summary": "Invalid JSON syntax",
                    "value": {
                      "code": "BAD_REQUEST",
                      "message": "Invalid JSON syntax in request body",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "missing_content_type": {
                    "summary": "Missing Content-Type header",
                    "value": {
                      "code": "BAD_REQUEST",
                      "message": "Content-Type header must be application/json",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication is required or has failed",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "WWW-Authenticate": {
                "description": "Authentication scheme information",
                "schema": {
                  "type": "string"
                },
                "example": "Bearer realm=\"devices-api\""
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "missing_token": {
                    "summary": "Missing authentication token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is required",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "invalid_token": {
                    "summary": "Invalid or expired token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is invalid or expired",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable - The requested media type is not supported",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "unsupported_media_type": {
                    "summary": "Requested media type not supported",
                    "value": {
                      "code": "NOT_ACCEPTABLE",
                      "message": "The requested media type is not supported. Supported: application/json",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "Accept",
                          "message": "Unsupported media type: application/xml",
                          "code": "UNSUPPORTED_MEDIA_TYPE"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit has been exceeded",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "Retry-After": {
                "description": "Number of seconds to wait before retrying the request",
                "schema": {
                  "type": "integer"
                },
                "example": 60
              },
              "RateLimit-Limit": {
                "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 100
              },
              "RateLimit-Remaining": {
                "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 95
              },
              "RateLimit-Reset": {
                "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 1705320000
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "rate_limited": {
                    "summary": "Rate limit exceeded",
                    "value": {
                      "code": "RATE_LIMIT_EXCEEDED",
                      "message": "Rate limit exceeded. Please retry after 60 seconds",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - An unexpected error occurred",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "internal_error": {
                    "summary": "Internal server error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "An unexpected error occurred. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "database_error": {
                    "summary": "Database connection error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "Service temporarily unavailable. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "head": {
        "summary": "Get devices collection metadata",
        "description": "Returns headers only for the devices collection (no response body).\nUseful for checking collection size or validating cached data via ETag.\n",
        "operationId": "headDevices",
        "tags": [
          "Devices"
        ],
        "security": [
          {
            "PasetoAuth": []
          }
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "PASETO v4 bearer token for authentication.\nFormat: Bearer v4.public.{payload}.{signature}\n",
            "schema": {
              "type": "string",
              "pattern": "^Bearer v4\\.(public|local)\\..+$"
            },
            "example": "Bearer v4.public.eyJleHAiOiIyMDI0LTAxLTE1VDEyOjAwOjAwWiIsImlhdCI6IjIwMjQtMDEtMTVUMTA6MDA6MDBaIiwic3ViIjoiMDE5MjM0YTUtNmI3Yy04ZDllLTBmMTItMzQ1Njc4OTBhYmNkIn0.signature"
          },
          {
            "name": "API-Version",
            "in": "header",
            "required": false,
            "description": "API version to use for this request. If not specified, defaults to v1.\nSupported versions: v1\n",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ],
              "default": "v1"
            },
            "example": "v1"
          },
          {
            "name": "Request-Id",
            "in": "header",
            "required": false,
            "description": "Unique request identifier for tracing and debugging purposes (per-request, always generated server-side).\nRFC 6648 compliant (no X- prefix).\n",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          {
            "name": "traceparent",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context header for distributed tracing (OpenTelemetry compatible).\n\nFormat: `{version}-{trace-id}-{parent-id}-{trace-flags}`\n- version: 2 hex digits (always \"00\")\n- trace-id: 32 hex digits (16 bytes)\n- parent-id: 16 hex digits (8 bytes)\n- trace-flags: 2 hex digits (sampling flag)\n\nIf not provided, the server will generate a new trace context.\n",
            "schema": {
              "type": "string",
              "pattern": "^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9a-f]{2}$"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          {
            "name": "tracestate",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context state header for vendor-specific trace data.\nComma-separated list of key=value pairs.\n",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE,rojo=00f067aa0ba902b7"
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "description": "Page number for pagination (1-indexed)",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1
            },
            "example": 1
          },
          {
            "name": "size",
            "in": "query",
            "required": false,
            "description": "Number of items per page",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 20
            },
            "example": 20
          },
          {
            "name": "brand",
            "in": "query",
            "required": false,
            "description": "Filter by brand(s). Comma-separated for OR matching.\nExample: ?brand=Apple,Samsung\n",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "minLength": 1,
                "maxLength": 100
              },
              "maxItems": 10
            },
            "style": "form",
            "explode": false,
            "example": "Apple"
          },
          {
            "name": "state",
            "in": "query",
            "required": false,
            "description": "Filter by state(s). Comma-separated for OR matching.\nExample: ?state=available,inactive\n",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "description": "The current state of the device",
                "enum": [
                  "available",
                  "in-use",
                  "inactive"
                ],
                "example": "available",
                "x-enum-descriptions": {
                  "available": "Device is available for use",
                  "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
                  "inactive": "Device is inactive and not available for use"
                }
              },
              "maxItems": 3
            },
            "style": "form",
            "explode": false,
            "example": "available"
          },
          {
            "name": "sort",
            "in": "query",
            "required": false,
            "description": "Fields to sort results by. Comma-separated for multi-field sorting.\nPrefix with `-` for descending order.\nSupported fields: name, brand, state, createdAt, updatedAt\nExample: ?sort=-createdAt,name (sort by createdAt DESC, then name ASC)\n",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "pattern": "^-?(name|brand|state|createdAt|updatedAt)$"
              },
              "maxItems": 5,
              "default": [
                "-createdAt"
              ]
            },
            "style": "form",
            "explode": false,
            "example": "-createdAt,name"
          },
          {
            "name": "If-None-Match",
            "in": "header",
            "required": false,
            "description": "ETag value for conditional requests.\nFor GET: Returns 304 Not Modified if the resource hasn't changed.\nFor PUT/PATCH: Prevents updates if resource exists (use \"*\").\n",
            "schema": {
              "type": "string"
            },
            "example": "\"a1b2c3d4e5f6\""
          }
        ],
        "responses": {
          "200": {
            "description": "Collection metadata returned",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "ETag": {
                "description": "Entity tag for cache validation and optimistic concurrency control.\nUse this value in If-Match or If-None-Match headers for subsequent requests.\n",
                "schema": {
                  "type": "string"
                },
                "example": "\"a1b2c3d4e5f6\""
              },
              "Cache-Control": {
                "description": "Cache directives for the response.\n- `private`: Response is specific to the user\n- `max-age`: Maximum time in seconds the response can be cached\n- `no-cache`: Must revalidate with server before using cached response\n",
                "schema": {
                  "type": "string"
                },
                "example": "private, max-age=300"
              },
              "Total-Count": {
                "description": "Total number of items matching the query",
                "schema": {
                  "type": "integer"
                },
                "example": 150
              },
              "Content-Length": {
                "description": "Size of the response body in bytes (if GET were used)",
                "schema": {
                  "type": "integer"
                },
                "example": 4096
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            }
          },
          "304": {
            "description": "Not Modified - Collection unchanged since last request",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "ETag": {
                "description": "Entity tag for cache validation and optimistic concurrency control.\nUse this value in If-Match or If-None-Match headers for subsequent requests.\n",
                "schema": {
                  "type": "string"
                },
                "example": "\"a1b2c3d4e5f6\""
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication is required or has failed",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "WWW-Authenticate": {
                "description": "Authentication scheme information",
                "schema": {
                  "type": "string"
                },
                "example": "Bearer realm=\"devices-api\""
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "missing_token": {
                    "summary": "Missing authentication token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is required",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "invalid_token": {
                    "summary": "Invalid or expired token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is invalid or expired",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit has been exceeded",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "Retry-After": {
                "description": "Number of seconds to wait before retrying the request",
                "schema": {
                  "type": "integer"
                },
                "example": 60
              },
              "RateLimit-Limit": {
                "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 100
              },
              "RateLimit-Remaining": {
                "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 95
              },
              "RateLimit-Reset": {
                "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 1705320000
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "rate_limited": {
                    "summary": "Rate limit exceeded",
                    "value": {
                      "code": "RATE_LIMIT_EXCEEDED",
                      "message": "Rate limit exceeded. Please retry after 60 seconds",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - An unexpected error occurred",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "internal_error": {
                    "summary": "Internal server error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "An unexpected error occurred. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "database_error": {
                    "summary": "Database connection error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "Service temporarily unavailable. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "options": {
        "summary": "Get allowed methods for devices collection",
        "description": "Returns the HTTP methods allowed for the devices collection.\nUsed for CORS preflight requests and capability discovery.\n",
        "operationId": "optionsDevices",
        "tags": [
          "Devices"
        ],
        "security": [],
        "responses": {
          "204": {
            "description": "Allowed methods returned",
            "headers": {
              "Allow": {
                "description": "Comma-separated list of allowed HTTP methods",
                "schema": {
                  "type": "string"
                },
                "example": "GET, POST, HEAD, OPTIONS"
              },
              "Access-Control-Allow-Methods": {
                "description": "CORS allowed methods",
                "schema": {
                  "type": "string"
                },
                "example": "GET, POST, HEAD, OPTIONS"
              },
              "Access-Control-Allow-Headers": {
                "description": "CORS allowed headers",
                "schema": {
                  "type": "string"
                },
                "example": "Authorization, Content-Type, Request-Id, Correlation-Id, API-Version, If-None-Match, traceparent, tracestate"
              },
              "Access-Control-Max-Age": {
                "description": "CORS preflight cache duration in seconds",
                "schema": {
                  "type": "integer"
                },
                "example": 86400
              }
            }
          }
        }
      }
    },
    "/devices/{deviceId}": {
      "get": {
        "summary": "Get a device by ID",
        "description": "Retrieves a single device by its unique identifier.",
        "operationId": "getDevice",
        "tags": [
          "Devices"
        ],
        "security": [
          {
            "PasetoAuth": []
          }
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "PASETO v4 bearer token for authentication.\nFormat: Bearer v4.public.{payload}.{signature}\n",
            "schema": {
              "type": "string",
              "pattern": "^Bearer v4\\.(public|local)\\..+$"
            },
            "example": "Bearer v4.public.eyJleHAiOiIyMDI0LTAxLTE1VDEyOjAwOjAwWiIsImlhdCI6IjIwMjQtMDEtMTVUMTA6MDA6MDBaIiwic3ViIjoiMDE5MjM0YTUtNmI3Yy04ZDllLTBmMTItMzQ1Njc4OTBhYmNkIn0.signature"
          },
          {
            "name": "API-Version",
            "in": "header",
            "required": false,
            "description": "API version to use for this request. If not specified, defaults to v1.\nSupported versions: v1\n",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ],
              "default": "v1"
            },
            "example": "v1"
          },
          {
            "name": "Request-Id",
            "in": "header",
            "required": false,
            "description": "Unique request identifier for tracing and debugging purposes (per-request, always generated server-side).\nRFC 6648 compliant (no X- prefix).\n",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          {
            "name": "traceparent",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context header for distributed tracing (OpenTelemetry compatible).\n\nFormat: `{version}-{trace-id}-{parent-id}-{trace-flags}`\n- version: 2 hex digits (always \"00\")\n- trace-id: 32 hex digits (16 bytes)\n- parent-id: 16 hex digits (8 bytes)\n- trace-flags: 2 hex digits (sampling flag)\n\nIf not provided, the server will generate a new trace context.\n",
            "schema": {
              "type": "string",
              "pattern": "^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9a-f]{2}$"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          {
            "name": "tracestate",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context state header for vendor-specific trace data.\nComma-separated list of key=value pairs.\n",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE,rojo=00f067aa0ba902b7"
          },
          {
            "name": "deviceId",
            "in": "path",
            "required": true,
            "description": "The unique identifier of the device (UUID v7)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          {
            "name": "fields",
            "in": "query",
            "required": false,
            "description": "Field projection to control which fields are returned in the response.\n\n**Default behavior (no fields parameter):**\nReturns essential fields only: `id`, `name`, `brand`, `state`\n\n**With fields parameter:**\nReturns only the specified fields. Use comma-separated list.\n\n**Supported fields:**\n- `id` - Device unique identifier (always included)\n- `name` - Device name\n- `brand` - Device manufacturer\n- `state` - Device state (available, in-use, inactive)\n- `createdAt` - Creation timestamp\n- `updatedAt` - Last update timestamp\n- `links` - HATEOAS navigation links\n\n**Nested fields syntax:**\nUse `field:(subfield1,subfield2)` for nested objects.\nExample: `links:(self)` returns only the self link.\n",
            "schema": {
              "type": "string",
              "pattern": "^[a-zA-Z,:()]+$"
            },
            "examples": {
              "essential": {
                "value": "id,name,brand,state",
                "summary": "Essential fields only"
              },
              "withTimestamps": {
                "value": "id,name,brand,state,createdAt,updatedAt",
                "summary": "Include timestamps"
              },
              "withLinks": {
                "value": "id,name,state,links:(self)",
                "summary": "Include HATEOAS links"
              }
            }
          },
          {
            "name": "If-None-Match",
            "in": "header",
            "required": false,
            "description": "ETag value for conditional requests.\nFor GET: Returns 304 Not Modified if the resource hasn't changed.\nFor PUT/PATCH: Prevents updates if resource exists (use \"*\").\n",
            "schema": {
              "type": "string"
            },
            "example": "\"a1b2c3d4e5f6\""
          },
          {
            "name": "Accept-Encoding",
            "in": "header",
            "required": false,
            "description": "Accepted compression algorithms for the response.\nServer will use the best matching algorithm.\n",
            "schema": {
              "type": "string"
            },
            "example": "gzip, deflate, br"
          },
          {
            "name": "Accept",
            "in": "header",
            "required": false,
            "description": "Media type(s) acceptable for the response.\nCurrently only `application/json` is supported.\n\nIf not specified, defaults to `application/json`.\nIf an unsupported media type is requested, returns 406 Not Acceptable.\n",
            "schema": {
              "type": "string",
              "default": "application/json"
            },
            "example": "application/json"
          }
        ],
        "responses": {
          "200": {
            "description": "Device retrieved successfully",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "ETag": {
                "description": "Entity tag for cache validation and optimistic concurrency control.\nUse this value in If-Match or If-None-Match headers for subsequent requests.\n",
                "schema": {
                  "type": "string"
                },
                "example": "\"a1b2c3d4e5f6\""
              },
              "Cache-Control": {
                "description": "Cache directives for the response.\n- `private`: Response is specific to the user\n- `max-age`: Maximum time in seconds the response can be cached\n- `no-cache`: Must revalidate with server before using cached response\n",
                "schema": {
                  "type": "string"
                },
                "example": "private, max-age=300"
              },
              "Last-Modified": {
                "description": "Timestamp when the resource was last modified",
                "schema": {
                  "type": "string",
                  "format": "date-time"
                },
                "example": "Wed, 15 Jan 2024 14:45:00 GMT"
              },
              "RateLimit-Limit": {
                "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 100
              },
              "RateLimit-Remaining": {
                "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 95
              },
              "RateLimit-Reset": {
                "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 1705320000
              },
              "Content-Encoding": {
                "description": "Compression algorithm used for the response body",
                "schema": {
                  "type": "string",
                  "enum": [
                    "gzip",
                    "deflate",
                    "br",
                    "identity"
                  ]
                },
                "example": "gzip"
              },
              "Vary": {
                "description": "Headers that affect response caching and content negotiation",
                "schema": {
                  "type": "string"
                },
                "example": "Accept-Encoding, Authorization"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Response containing a single device",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "object",
                      "description": "A device resource",
                      "required": [
                        "id",
                        "name",
                        "brand",
                        "state",
                        "createdAt"
                      ],
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid",
                          "description": "Unique identifier for the device (UUID v7)",
                          "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                        },
                        "name": {
                          "type": "string",
                          "description": "The name of the device",
                          "minLength": 1,
                          "maxLength": 255,
                          "example": "iPhone 15 Pro"
                        },
                        "brand": {
                          "type": "string",
                          "description": "The brand/manufacturer of the device",
                          "minLength": 1,
                          "maxLength": 100,
                          "example": "Apple"
                        },
                        "state": {
                          "type": "string",
                          "description": "The current state of the device",
                          "enum": [
                            "available",
                            "in-use",
                            "inactive"
                          ],
                          "example": "available",
                          "x-enum-descriptions": {
                            "available": "Device is available for use",
                            "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
                            "inactive": "Device is inactive and not available for use"
                          }
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Timestamp when the device was created (immutable)",
                          "example": "2024-01-15T10:30:00Z"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Timestamp when the device was last updated",
                          "example": "2024-01-15T14:45:00Z"
                        },
                        "links": {
                          "type": "object",
                          "description": "HATEOAS links for device navigation",
                          "properties": {
                            "self": {
                              "type": "string",
                              "format": "uri-reference",
                              "description": "Link to this device resource",
                              "example": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "device": {
                    "summary": "Existing device",
                    "value": {
                      "data": {
                        "id": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                        "name": "iPhone 15 Pro",
                        "brand": "Apple",
                        "state": "in-use",
                        "createdAt": "2024-01-15T10:30:00Z",
                        "updatedAt": "2024-01-15T14:45:00Z",
                        "links": {
                          "self": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "304": {
            "description": "Not Modified - Resource unchanged since last request (ETag matched)",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "ETag": {
                "description": "Entity tag for cache validation and optimistic concurrency control.\nUse this value in If-Match or If-None-Match headers for subsequent requests.\n",
                "schema": {
                  "type": "string"
                },
                "example": "\"a1b2c3d4e5f6\""
              },
              "Cache-Control": {
                "description": "Cache directives for the response.\n- `private`: Response is specific to the user\n- `max-age`: Maximum time in seconds the response can be cached\n- `no-cache`: Must revalidate with server before using cached response\n",
                "schema": {
                  "type": "string"
                },
                "example": "private, max-age=300"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication is required or has failed",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "WWW-Authenticate": {
                "description": "Authentication scheme information",
                "schema": {
                  "type": "string"
                },
                "example": "Bearer realm=\"devices-api\""
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "missing_token": {
                    "summary": "Missing authentication token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is required",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "invalid_token": {
                    "summary": "Invalid or expired token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is invalid or expired",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "device_not_found": {
                    "summary": "Device not found",
                    "value": {
                      "code": "NOT_FOUND",
                      "message": "Device with ID '019234a5-6b7c-8d9e-0f12-34567890abcd' not found",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable - The requested media type is not supported",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "unsupported_media_type": {
                    "summary": "Requested media type not supported",
                    "value": {
                      "code": "NOT_ACCEPTABLE",
                      "message": "The requested media type is not supported. Supported: application/json",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "Accept",
                          "message": "Unsupported media type: application/xml",
                          "code": "UNSUPPORTED_MEDIA_TYPE"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit has been exceeded",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "Retry-After": {
                "description": "Number of seconds to wait before retrying the request",
                "schema": {
                  "type": "integer"
                },
                "example": 60
              },
              "RateLimit-Limit": {
                "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 100
              },
              "RateLimit-Remaining": {
                "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 95
              },
              "RateLimit-Reset": {
                "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 1705320000
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "rate_limited": {
                    "summary": "Rate limit exceeded",
                    "value": {
                      "code": "RATE_LIMIT_EXCEEDED",
                      "message": "Rate limit exceeded. Please retry after 60 seconds",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - An unexpected error occurred",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "internal_error": {
                    "summary": "Internal server error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "An unexpected error occurred. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "database_error": {
                    "summary": "Database connection error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "Service temporarily unavailable. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "summary": "Fully update a device",
        "description": "Fully updates an existing device. All fields must be provided.\n\n**Business Rules:**\n- Creation time cannot be updated (will be ignored if provided)\n- Name and brand cannot be updated if the device state is \"in-use\"\n",
        "operationId": "updateDevice",
        "tags": [
          "Devices"
        ],
        "security": [
          {
            "PasetoAuth": []
          }
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "PASETO v4 bearer token for authentication.\nFormat: Bearer v4.public.{payload}.{signature}\n",
            "schema": {
              "type": "string",
              "pattern": "^Bearer v4\\.(public|local)\\..+$"
            },
            "example": "Bearer v4.public.eyJleHAiOiIyMDI0LTAxLTE1VDEyOjAwOjAwWiIsImlhdCI6IjIwMjQtMDEtMTVUMTA6MDA6MDBaIiwic3ViIjoiMDE5MjM0YTUtNmI3Yy04ZDllLTBmMTItMzQ1Njc4OTBhYmNkIn0.signature"
          },
          {
            "name": "API-Version",
            "in": "header",
            "required": false,
            "description": "API version to use for this request. If not specified, defaults to v1.\nSupported versions: v1\n",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ],
              "default": "v1"
            },
            "example": "v1"
          },
          {
            "name": "Request-Id",
            "in": "header",
            "required": false,
            "description": "Unique request identifier for tracing and debugging purposes (per-request, always generated server-side).\nRFC 6648 compliant (no X- prefix).\n",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          {
            "name": "traceparent",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context header for distributed tracing (OpenTelemetry compatible).\n\nFormat: `{version}-{trace-id}-{parent-id}-{trace-flags}`\n- version: 2 hex digits (always \"00\")\n- trace-id: 32 hex digits (16 bytes)\n- parent-id: 16 hex digits (8 bytes)\n- trace-flags: 2 hex digits (sampling flag)\n\nIf not provided, the server will generate a new trace context.\n",
            "schema": {
              "type": "string",
              "pattern": "^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9a-f]{2}$"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          {
            "name": "tracestate",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context state header for vendor-specific trace data.\nComma-separated list of key=value pairs.\n",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE,rojo=00f067aa0ba902b7"
          },
          {
            "name": "deviceId",
            "in": "path",
            "required": true,
            "description": "The unique identifier of the device (UUID v7)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          {
            "name": "If-Match",
            "in": "header",
            "required": false,
            "description": "ETag value for optimistic concurrency control.\nThe request will only succeed if the current resource ETag matches this value.\n",
            "schema": {
              "type": "string"
            },
            "example": "\"a1b2c3d4e5f6\""
          },
          {
            "name": "Accept",
            "in": "header",
            "required": false,
            "description": "Media type(s) acceptable for the response.\nCurrently only `application/json` is supported.\n\nIf not specified, defaults to `application/json`.\nIf an unsupported media type is requested, returns 406 Not Acceptable.\n",
            "schema": {
              "type": "string",
              "default": "application/json"
            },
            "example": "application/json"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Request body for fully updating a device (PUT)",
                "required": [
                  "name",
                  "brand",
                  "state"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "The name of the device.\n**Note:** Cannot be updated if the device state is \"in-use\"\n",
                    "minLength": 1,
                    "maxLength": 255,
                    "example": "iPhone 15 Pro Max"
                  },
                  "brand": {
                    "type": "string",
                    "description": "The brand/manufacturer of the device.\n**Note:** Cannot be updated if the device state is \"in-use\"\n",
                    "minLength": 1,
                    "maxLength": 100,
                    "example": "Apple"
                  },
                  "state": {
                    "description": "The state of the device",
                    "type": "string",
                    "enum": [
                      "available",
                      "in-use",
                      "inactive"
                    ],
                    "example": "available",
                    "x-enum-descriptions": {
                      "available": "Device is available for use",
                      "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
                      "inactive": "Device is inactive and not available for use"
                    }
                  }
                }
              },
              "examples": {
                "update": {
                  "summary": "Fully update a device",
                  "value": {
                    "name": "iPhone 15 Pro Max",
                    "brand": "Apple",
                    "state": "in-use"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Device updated successfully",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "ETag": {
                "description": "Entity tag for cache validation and optimistic concurrency control.\nUse this value in If-Match or If-None-Match headers for subsequent requests.\n",
                "schema": {
                  "type": "string"
                },
                "example": "\"a1b2c3d4e5f6\""
              },
              "RateLimit-Limit": {
                "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 100
              },
              "RateLimit-Remaining": {
                "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 95
              },
              "RateLimit-Reset": {
                "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 1705320000
              },
              "Content-Encoding": {
                "description": "Compression algorithm used for the response body",
                "schema": {
                  "type": "string",
                  "enum": [
                    "gzip",
                    "deflate",
                    "br",
                    "identity"
                  ]
                },
                "example": "gzip"
              },
              "Vary": {
                "description": "Headers that affect response caching and content negotiation",
                "schema": {
                  "type": "string"
                },
                "example": "Accept-Encoding, Authorization"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Response containing a single device",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "object",
                      "description": "A device resource",
                      "required": [
                        "id",
                        "name",
                        "brand",
                        "state",
                        "createdAt"
                      ],
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid",
                          "description": "Unique identifier for the device (UUID v7)",
                          "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                        },
                        "name": {
                          "type": "string",
                          "description": "The name of the device",
                          "minLength": 1,
                          "maxLength": 255,
                          "example": "iPhone 15 Pro"
                        },
                        "brand": {
                          "type": "string",
                          "description": "The brand/manufacturer of the device",
                          "minLength": 1,
                          "maxLength": 100,
                          "example": "Apple"
                        },
                        "state": {
                          "type": "string",
                          "description": "The current state of the device",
                          "enum": [
                            "available",
                            "in-use",
                            "inactive"
                          ],
                          "example": "available",
                          "x-enum-descriptions": {
                            "available": "Device is available for use",
                            "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
                            "inactive": "Device is inactive and not available for use"
                          }
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Timestamp when the device was created (immutable)",
                          "example": "2024-01-15T10:30:00Z"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Timestamp when the device was last updated",
                          "example": "2024-01-15T14:45:00Z"
                        },
                        "links": {
                          "type": "object",
                          "description": "HATEOAS links for device navigation",
                          "properties": {
                            "self": {
                              "type": "string",
                              "format": "uri-reference",
                              "description": "Link to this device resource",
                              "example": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "updated": {
                    "summary": "Updated device",
                    "value": {
                      "data": {
                        "id": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                        "name": "iPhone 15 Pro Max",
                        "brand": "Apple",
                        "state": "in-use",
                        "createdAt": "2024-01-15T10:30:00Z",
                        "updatedAt": "2024-01-15T16:20:00Z",
                        "links": {
                          "self": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - The request was malformed or contains invalid syntax",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "invalid_json": {
                    "summary": "Invalid JSON syntax",
                    "value": {
                      "code": "BAD_REQUEST",
                      "message": "Invalid JSON syntax in request body",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "missing_content_type": {
                    "summary": "Missing Content-Type header",
                    "value": {
                      "code": "BAD_REQUEST",
                      "message": "Content-Type header must be application/json",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication is required or has failed",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "WWW-Authenticate": {
                "description": "Authentication scheme information",
                "schema": {
                  "type": "string"
                },
                "example": "Bearer realm=\"devices-api\""
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "missing_token": {
                    "summary": "Missing authentication token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is required",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "invalid_token": {
                    "summary": "Invalid or expired token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is invalid or expired",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "device_not_found": {
                    "summary": "Device not found",
                    "value": {
                      "code": "NOT_FOUND",
                      "message": "Device with ID '019234a5-6b7c-8d9e-0f12-34567890abcd' not found",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable - The requested media type is not supported",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "unsupported_media_type": {
                    "summary": "Requested media type not supported",
                    "value": {
                      "code": "NOT_ACCEPTABLE",
                      "message": "The requested media type is not supported. Supported: application/json",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "Accept",
                          "message": "Unsupported media type: application/xml",
                          "code": "UNSUPPORTED_MEDIA_TYPE"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "Conflict - The request conflicts with the current state of the resource",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "device_in_use_delete": {
                    "summary": "Cannot delete device that is in use",
                    "value": {
                      "code": "CONFLICT",
                      "message": "Cannot delete device: device is currently in use",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "device_in_use_update": {
                    "summary": "Cannot update name/brand of device that is in use",
                    "value": {
                      "code": "CONFLICT",
                      "message": "Cannot update name or brand: device is currently in use",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "name",
                          "message": "Cannot be updated while device is in use",
                          "code": "IMMUTABLE_FIELD"
                        },
                        {
                          "field": "brand",
                          "message": "Cannot be updated while device is in use",
                          "code": "IMMUTABLE_FIELD"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "412": {
            "description": "Precondition Failed - The If-Match header condition was not met",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "ETag": {
                "description": "Entity tag for cache validation and optimistic concurrency control.\nUse this value in If-Match or If-None-Match headers for subsequent requests.\n",
                "schema": {
                  "type": "string"
                },
                "example": "\"a1b2c3d4e5f6\""
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "etag_mismatch": {
                    "summary": "ETag mismatch - resource was modified",
                    "value": {
                      "code": "PRECONDITION_FAILED",
                      "message": "Resource has been modified since last retrieval",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "If-Match",
                          "message": "Provided ETag does not match current resource version",
                          "code": "ETAG_MISMATCH"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity - The request was well-formed but contains semantic errors",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "validation_error": {
                    "summary": "Validation errors",
                    "value": {
                      "code": "VALIDATION_ERROR",
                      "message": "The request body contains validation errors",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "name",
                          "message": "name is required",
                          "code": "REQUIRED_FIELD"
                        },
                        {
                          "field": "brand",
                          "message": "brand must be between 1 and 100 characters",
                          "code": "INVALID_LENGTH"
                        }
                      ]
                    }
                  },
                  "invalid_state": {
                    "summary": "Invalid state value",
                    "value": {
                      "code": "VALIDATION_ERROR",
                      "message": "The request body contains validation errors",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "state",
                          "message": "state must be one of: available, in-use, inactive",
                          "code": "INVALID_ENUM_VALUE"
                        }
                      ]
                    }
                  },
                  "invalid_uuid": {
                    "summary": "Invalid UUID format",
                    "value": {
                      "code": "VALIDATION_ERROR",
                      "message": "The request contains an invalid identifier",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "deviceId",
                          "message": "deviceId must be a valid UUID",
                          "code": "INVALID_FORMAT"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit has been exceeded",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "Retry-After": {
                "description": "Number of seconds to wait before retrying the request",
                "schema": {
                  "type": "integer"
                },
                "example": 60
              },
              "RateLimit-Limit": {
                "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 100
              },
              "RateLimit-Remaining": {
                "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 95
              },
              "RateLimit-Reset": {
                "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 1705320000
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "rate_limited": {
                    "summary": "Rate limit exceeded",
                    "value": {
                      "code": "RATE_LIMIT_EXCEEDED",
                      "message": "Rate limit exceeded. Please retry after 60 seconds",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - An unexpected error occurred",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "internal_error": {
                    "summary": "Internal server error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "An unexpected error occurred. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "database_error": {
                    "summary": "Database connection error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "Service temporarily unavailable. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Partially update a device",
        "description": "Partially updates an existing device. Only provided fields will be updated.\n\n**Business Rules:**\n- Creation time cannot be updated (will be ignored if provided)\n- Name and brand cannot be updated if the device state is \"in-use\"\n",
        "operationId": "patchDevice",
        "tags": [
          "Devices"
        ],
        "security": [
          {
            "PasetoAuth": []
          }
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "PASETO v4 bearer token for authentication.\nFormat: Bearer v4.public.{payload}.{signature}\n",
            "schema": {
              "type": "string",
              "pattern": "^Bearer v4\\.(public|local)\\..+$"
            },
            "example": "Bearer v4.public.eyJleHAiOiIyMDI0LTAxLTE1VDEyOjAwOjAwWiIsImlhdCI6IjIwMjQtMDEtMTVUMTA6MDA6MDBaIiwic3ViIjoiMDE5MjM0YTUtNmI3Yy04ZDllLTBmMTItMzQ1Njc4OTBhYmNkIn0.signature"
          },
          {
            "name": "API-Version",
            "in": "header",
            "required": false,
            "description": "API version to use for this request. If not specified, defaults to v1.\nSupported versions: v1\n",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ],
              "default": "v1"
            },
            "example": "v1"
          },
          {
            "name": "Request-Id",
            "in": "header",
            "required": false,
            "description": "Unique request identifier for tracing and debugging purposes (per-request, always generated server-side).\nRFC 6648 compliant (no X- prefix).\n",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          {
            "name": "traceparent",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context header for distributed tracing (OpenTelemetry compatible).\n\nFormat: `{version}-{trace-id}-{parent-id}-{trace-flags}`\n- version: 2 hex digits (always \"00\")\n- trace-id: 32 hex digits (16 bytes)\n- parent-id: 16 hex digits (8 bytes)\n- trace-flags: 2 hex digits (sampling flag)\n\nIf not provided, the server will generate a new trace context.\n",
            "schema": {
              "type": "string",
              "pattern": "^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9a-f]{2}$"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          {
            "name": "tracestate",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context state header for vendor-specific trace data.\nComma-separated list of key=value pairs.\n",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE,rojo=00f067aa0ba902b7"
          },
          {
            "name": "deviceId",
            "in": "path",
            "required": true,
            "description": "The unique identifier of the device (UUID v7)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          {
            "name": "If-Match",
            "in": "header",
            "required": false,
            "description": "ETag value for optimistic concurrency control.\nThe request will only succeed if the current resource ETag matches this value.\n",
            "schema": {
              "type": "string"
            },
            "example": "\"a1b2c3d4e5f6\""
          },
          {
            "name": "Accept",
            "in": "header",
            "required": false,
            "description": "Media type(s) acceptable for the response.\nCurrently only `application/json` is supported.\n\nIf not specified, defaults to `application/json`.\nIf an unsupported media type is requested, returns 406 Not Acceptable.\n",
            "schema": {
              "type": "string",
              "default": "application/json"
            },
            "example": "application/json"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "description": "Request body for partially updating a device (PATCH)",
                "minProperties": 1,
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "The name of the device.\n**Note:** Cannot be updated if the device state is \"in-use\"\n",
                    "minLength": 1,
                    "maxLength": 255,
                    "example": "iPhone 15 Pro Max"
                  },
                  "brand": {
                    "type": "string",
                    "description": "The brand/manufacturer of the device.\n**Note:** Cannot be updated if the device state is \"in-use\"\n",
                    "minLength": 1,
                    "maxLength": 100,
                    "example": "Apple"
                  },
                  "state": {
                    "description": "The state of the device",
                    "type": "string",
                    "enum": [
                      "available",
                      "in-use",
                      "inactive"
                    ],
                    "example": "available",
                    "x-enum-descriptions": {
                      "available": "Device is available for use",
                      "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
                      "inactive": "Device is inactive and not available for use"
                    }
                  }
                }
              },
              "examples": {
                "patch_state": {
                  "summary": "Update only the device state",
                  "value": {
                    "state": "inactive"
                  }
                },
                "patch_name": {
                  "summary": "Update only the device name",
                  "value": {
                    "name": "iPhone 15 Pro Max 256GB"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Device patched successfully",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "ETag": {
                "description": "Entity tag for cache validation and optimistic concurrency control.\nUse this value in If-Match or If-None-Match headers for subsequent requests.\n",
                "schema": {
                  "type": "string"
                },
                "example": "\"a1b2c3d4e5f6\""
              },
              "RateLimit-Limit": {
                "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 100
              },
              "RateLimit-Remaining": {
                "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 95
              },
              "RateLimit-Reset": {
                "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 1705320000
              },
              "Content-Encoding": {
                "description": "Compression algorithm used for the response body",
                "schema": {
                  "type": "string",
                  "enum": [
                    "gzip",
                    "deflate",
                    "br",
                    "identity"
                  ]
                },
                "example": "gzip"
              },
              "Vary": {
                "description": "Headers that affect response caching and content negotiation",
                "schema": {
                  "type": "string"
                },
                "example": "Accept-Encoding, Authorization"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Response containing a single device",
                  "required": [
                    "data"
                  ],
                  "properties": {
                    "data": {
                      "type": "object",
                      "description": "A device resource",
                      "required": [
                        "id",
                        "name",
                        "brand",
                        "state",
                        "createdAt"
                      ],
                      "properties": {
                        "id": {
                          "type": "string",
                          "format": "uuid",
                          "description": "Unique identifier for the device (UUID v7)",
                          "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                        },
                        "name": {
                          "type": "string",
                          "description": "The name of the device",
                          "minLength": 1,
                          "maxLength": 255,
                          "example": "iPhone 15 Pro"
                        },
                        "brand": {
                          "type": "string",
                          "description": "The brand/manufacturer of the device",
                          "minLength": 1,
                          "maxLength": 100,
                          "example": "Apple"
                        },
                        "state": {
                          "type": "string",
                          "description": "The current state of the device",
                          "enum": [
                            "available",
                            "in-use",
                            "inactive"
                          ],
                          "example": "available",
                          "x-enum-descriptions": {
                            "available": "Device is available for use",
                            "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
                            "inactive": "Device is inactive and not available for use"
                          }
                        },
                        "createdAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Timestamp when the device was created (immutable)",
                          "example": "2024-01-15T10:30:00Z"
                        },
                        "updatedAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Timestamp when the device was last updated",
                          "example": "2024-01-15T14:45:00Z"
                        },
                        "links": {
                          "type": "object",
                          "description": "HATEOAS links for device navigation",
                          "properties": {
                            "self": {
                              "type": "string",
                              "format": "uri-reference",
                              "description": "Link to this device resource",
                              "example": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "patched": {
                    "summary": "Partially updated device",
                    "value": {
                      "data": {
                        "id": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                        "name": "iPhone 15 Pro",
                        "brand": "Apple",
                        "state": "inactive",
                        "createdAt": "2024-01-15T10:30:00Z",
                        "updatedAt": "2024-01-15T18:00:00Z",
                        "links": {
                          "self": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - The request was malformed or contains invalid syntax",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "invalid_json": {
                    "summary": "Invalid JSON syntax",
                    "value": {
                      "code": "BAD_REQUEST",
                      "message": "Invalid JSON syntax in request body",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "missing_content_type": {
                    "summary": "Missing Content-Type header",
                    "value": {
                      "code": "BAD_REQUEST",
                      "message": "Content-Type header must be application/json",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication is required or has failed",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "WWW-Authenticate": {
                "description": "Authentication scheme information",
                "schema": {
                  "type": "string"
                },
                "example": "Bearer realm=\"devices-api\""
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "missing_token": {
                    "summary": "Missing authentication token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is required",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "invalid_token": {
                    "summary": "Invalid or expired token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is invalid or expired",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "device_not_found": {
                    "summary": "Device not found",
                    "value": {
                      "code": "NOT_FOUND",
                      "message": "Device with ID '019234a5-6b7c-8d9e-0f12-34567890abcd' not found",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "406": {
            "description": "Not Acceptable - The requested media type is not supported",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "unsupported_media_type": {
                    "summary": "Requested media type not supported",
                    "value": {
                      "code": "NOT_ACCEPTABLE",
                      "message": "The requested media type is not supported. Supported: application/json",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "Accept",
                          "message": "Unsupported media type: application/xml",
                          "code": "UNSUPPORTED_MEDIA_TYPE"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "Conflict - The request conflicts with the current state of the resource",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "device_in_use_delete": {
                    "summary": "Cannot delete device that is in use",
                    "value": {
                      "code": "CONFLICT",
                      "message": "Cannot delete device: device is currently in use",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "device_in_use_update": {
                    "summary": "Cannot update name/brand of device that is in use",
                    "value": {
                      "code": "CONFLICT",
                      "message": "Cannot update name or brand: device is currently in use",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "name",
                          "message": "Cannot be updated while device is in use",
                          "code": "IMMUTABLE_FIELD"
                        },
                        {
                          "field": "brand",
                          "message": "Cannot be updated while device is in use",
                          "code": "IMMUTABLE_FIELD"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "412": {
            "description": "Precondition Failed - The If-Match header condition was not met",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "ETag": {
                "description": "Entity tag for cache validation and optimistic concurrency control.\nUse this value in If-Match or If-None-Match headers for subsequent requests.\n",
                "schema": {
                  "type": "string"
                },
                "example": "\"a1b2c3d4e5f6\""
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "etag_mismatch": {
                    "summary": "ETag mismatch - resource was modified",
                    "value": {
                      "code": "PRECONDITION_FAILED",
                      "message": "Resource has been modified since last retrieval",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "If-Match",
                          "message": "Provided ETag does not match current resource version",
                          "code": "ETAG_MISMATCH"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Unprocessable Entity - The request was well-formed but contains semantic errors",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "validation_error": {
                    "summary": "Validation errors",
                    "value": {
                      "code": "VALIDATION_ERROR",
                      "message": "The request body contains validation errors",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "name",
                          "message": "name is required",
                          "code": "REQUIRED_FIELD"
                        },
                        {
                          "field": "brand",
                          "message": "brand must be between 1 and 100 characters",
                          "code": "INVALID_LENGTH"
                        }
                      ]
                    }
                  },
                  "invalid_state": {
                    "summary": "Invalid state value",
                    "value": {
                      "code": "VALIDATION_ERROR",
                      "message": "The request body contains validation errors",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "state",
                          "message": "state must be one of: available, in-use, inactive",
                          "code": "INVALID_ENUM_VALUE"
                        }
                      ]
                    }
                  },
                  "invalid_uuid": {
                    "summary": "Invalid UUID format",
                    "value": {
                      "code": "VALIDATION_ERROR",
                      "message": "The request contains an invalid identifier",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "deviceId",
                          "message": "deviceId must be a valid UUID",
                          "code": "INVALID_FORMAT"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit has been exceeded",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "Retry-After": {
                "description": "Number of seconds to wait before retrying the request",
                "schema": {
                  "type": "integer"
                },
                "example": 60
              },
              "RateLimit-Limit": {
                "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 100
              },
              "RateLimit-Remaining": {
                "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 95
              },
              "RateLimit-Reset": {
                "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 1705320000
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "rate_limited": {
                    "summary": "Rate limit exceeded",
                    "value": {
                      "code": "RATE_LIMIT_EXCEEDED",
                      "message": "Rate limit exceeded. Please retry after 60 seconds",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - An unexpected error occurred",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "internal_error": {
                    "summary": "Internal server error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "An unexpected error occurred. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "database_error": {
                    "summary": "Database connection error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "Service temporarily unavailable. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "summary": "Delete a device",
        "description": "Deletes a device by its unique identifier.\n\n**Business Rules:**\n- Devices with state \"in-use\" cannot be deleted\n",
        "operationId": "deleteDevice",
        "tags": [
          "Devices"
        ],
        "security": [
          {
            "PasetoAuth": []
          }
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "PASETO v4 bearer token for authentication.\nFormat: Bearer v4.public.{payload}.{signature}\n",
            "schema": {
              "type": "string",
              "pattern": "^Bearer v4\\.(public|local)\\..+$"
            },
            "example": "Bearer v4.public.eyJleHAiOiIyMDI0LTAxLTE1VDEyOjAwOjAwWiIsImlhdCI6IjIwMjQtMDEtMTVUMTA6MDA6MDBaIiwic3ViIjoiMDE5MjM0YTUtNmI3Yy04ZDllLTBmMTItMzQ1Njc4OTBhYmNkIn0.signature"
          },
          {
            "name": "API-Version",
            "in": "header",
            "required": false,
            "description": "API version to use for this request. If not specified, defaults to v1.\nSupported versions: v1\n",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ],
              "default": "v1"
            },
            "example": "v1"
          },
          {
            "name": "Request-Id",
            "in": "header",
            "required": false,
            "description": "Unique request identifier for tracing and debugging purposes (per-request, always generated server-side).\nRFC 6648 compliant (no X- prefix).\n",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          {
            "name": "traceparent",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context header for distributed tracing (OpenTelemetry compatible).\n\nFormat: `{version}-{trace-id}-{parent-id}-{trace-flags}`\n- version: 2 hex digits (always \"00\")\n- trace-id: 32 hex digits (16 bytes)\n- parent-id: 16 hex digits (8 bytes)\n- trace-flags: 2 hex digits (sampling flag)\n\nIf not provided, the server will generate a new trace context.\n",
            "schema": {
              "type": "string",
              "pattern": "^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9a-f]{2}$"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          {
            "name": "tracestate",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context state header for vendor-specific trace data.\nComma-separated list of key=value pairs.\n",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE,rojo=00f067aa0ba902b7"
          },
          {
            "name": "deviceId",
            "in": "path",
            "required": true,
            "description": "The unique identifier of the device (UUID v7)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          }
        ],
        "responses": {
          "204": {
            "description": "Device deleted successfully",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "RateLimit-Limit": {
                "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 100
              },
              "RateLimit-Remaining": {
                "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 95
              },
              "RateLimit-Reset": {
                "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 1705320000
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication is required or has failed",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "WWW-Authenticate": {
                "description": "Authentication scheme information",
                "schema": {
                  "type": "string"
                },
                "example": "Bearer realm=\"devices-api\""
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "missing_token": {
                    "summary": "Missing authentication token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is required",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "invalid_token": {
                    "summary": "Invalid or expired token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is invalid or expired",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "device_not_found": {
                    "summary": "Device not found",
                    "value": {
                      "code": "NOT_FOUND",
                      "message": "Device with ID '019234a5-6b7c-8d9e-0f12-34567890abcd' not found",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "409": {
            "description": "Conflict - The request conflicts with the current state of the resource",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "device_in_use_delete": {
                    "summary": "Cannot delete device that is in use",
                    "value": {
                      "code": "CONFLICT",
                      "message": "Cannot delete device: device is currently in use",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "device_in_use_update": {
                    "summary": "Cannot update name/brand of device that is in use",
                    "value": {
                      "code": "CONFLICT",
                      "message": "Cannot update name or brand: device is currently in use",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "details": [
                        {
                          "field": "name",
                          "message": "Cannot be updated while device is in use",
                          "code": "IMMUTABLE_FIELD"
                        },
                        {
                          "field": "brand",
                          "message": "Cannot be updated while device is in use",
                          "code": "IMMUTABLE_FIELD"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit has been exceeded",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "Retry-After": {
                "description": "Number of seconds to wait before retrying the request",
                "schema": {
                  "type": "integer"
                },
                "example": 60
              },
              "RateLimit-Limit": {
                "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 100
              },
              "RateLimit-Remaining": {
                "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 95
              },
              "RateLimit-Reset": {
                "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 1705320000
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "rate_limited": {
                    "summary": "Rate limit exceeded",
                    "value": {
                      "code": "RATE_LIMIT_EXCEEDED",
                      "message": "Rate limit exceeded. Please retry after 60 seconds",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - An unexpected error occurred",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "internal_error": {
                    "summary": "Internal server error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "An unexpected error occurred. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "database_error": {
                    "summary": "Database connection error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "Service temporarily unavailable. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "head": {
        "summary": "Get device metadata",
        "description": "Returns headers only for a single device (no response body).\nUseful for checking if a device exists or validating cached data via ETag.\n",
        "operationId": "headDevice",
        "tags": [
          "Devices"
        ],
        "security": [
          {
            "PasetoAuth": []
          }
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "PASETO v4 bearer token for authentication.\nFormat: Bearer v4.public.{payload}.{signature}\n",
            "schema": {
              "type": "string",
              "pattern": "^Bearer v4\\.(public|local)\\..+$"
            },
            "example": "Bearer v4.public.eyJleHAiOiIyMDI0LTAxLTE1VDEyOjAwOjAwWiIsImlhdCI6IjIwMjQtMDEtMTVUMTA6MDA6MDBaIiwic3ViIjoiMDE5MjM0YTUtNmI3Yy04ZDllLTBmMTItMzQ1Njc4OTBhYmNkIn0.signature"
          },
          {
            "name": "API-Version",
            "in": "header",
            "required": false,
            "description": "API version to use for this request. If not specified, defaults to v1.\nSupported versions: v1\n",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ],
              "default": "v1"
            },
            "example": "v1"
          },
          {
            "name": "Request-Id",
            "in": "header",
            "required": false,
            "description": "Unique request identifier for tracing and debugging purposes (per-request, always generated server-side).\nRFC 6648 compliant (no X- prefix).\n",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          {
            "name": "traceparent",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context header for distributed tracing (OpenTelemetry compatible).\n\nFormat: `{version}-{trace-id}-{parent-id}-{trace-flags}`\n- version: 2 hex digits (always \"00\")\n- trace-id: 32 hex digits (16 bytes)\n- parent-id: 16 hex digits (8 bytes)\n- trace-flags: 2 hex digits (sampling flag)\n\nIf not provided, the server will generate a new trace context.\n",
            "schema": {
              "type": "string",
              "pattern": "^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9a-f]{2}$"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          {
            "name": "tracestate",
            "in": "header",
            "required": false,
            "description": "W3C Trace Context state header for vendor-specific trace data.\nComma-separated list of key=value pairs.\n",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE,rojo=00f067aa0ba902b7"
          },
          {
            "name": "deviceId",
            "in": "path",
            "required": true,
            "description": "The unique identifier of the device (UUID v7)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          {
            "name": "If-None-Match",
            "in": "header",
            "required": false,
            "description": "ETag value for conditional requests.\nFor GET: Returns 304 Not Modified if the resource hasn't changed.\nFor PUT/PATCH: Prevents updates if resource exists (use \"*\").\n",
            "schema": {
              "type": "string"
            },
            "example": "\"a1b2c3d4e5f6\""
          }
        ],
        "responses": {
          "200": {
            "description": "Device exists",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "ETag": {
                "description": "Entity tag for cache validation and optimistic concurrency control.\nUse this value in If-Match or If-None-Match headers for subsequent requests.\n",
                "schema": {
                  "type": "string"
                },
                "example": "\"a1b2c3d4e5f6\""
              },
              "Cache-Control": {
                "description": "Cache directives for the response.\n- `private`: Response is specific to the user\n- `max-age`: Maximum time in seconds the response can be cached\n- `no-cache`: Must revalidate with server before using cached response\n",
                "schema": {
                  "type": "string"
                },
                "example": "private, max-age=300"
              },
              "Last-Modified": {
                "description": "Timestamp when the resource was last modified",
                "schema": {
                  "type": "string",
                  "format": "date-time"
                },
                "example": "Wed, 15 Jan 2024 14:45:00 GMT"
              },
              "Content-Length": {
                "description": "Size of the response body in bytes (if GET were used)",
                "schema": {
                  "type": "integer"
                },
                "example": 256
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            }
          },
          "304": {
            "description": "Not Modified - Resource unchanged since last request",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "ETag": {
                "description": "Entity tag for cache validation and optimistic concurrency control.\nUse this value in If-Match or If-None-Match headers for subsequent requests.\n",
                "schema": {
                  "type": "string"
                },
                "example": "\"a1b2c3d4e5f6\""
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication is required or has failed",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "WWW-Authenticate": {
                "description": "Authentication scheme information",
                "schema": {
                  "type": "string"
                },
                "example": "Bearer realm=\"devices-api\""
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "missing_token": {
                    "summary": "Missing authentication token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is required",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "invalid_token": {
                    "summary": "Invalid or expired token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is invalid or expired",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The requested resource does not exist",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "device_not_found": {
                    "summary": "Device not found",
                    "value": {
                      "code": "NOT_FOUND",
                      "message": "Device with ID '019234a5-6b7c-8d9e-0f12-34567890abcd' not found",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "429": {
            "description": "Too Many Requests - Rate limit has been exceeded",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "Retry-After": {
                "description": "Number of seconds to wait before retrying the request",
                "schema": {
                  "type": "integer"
                },
                "example": 60
              },
              "RateLimit-Limit": {
                "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 100
              },
              "RateLimit-Remaining": {
                "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 95
              },
              "RateLimit-Reset": {
                "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
                "schema": {
                  "type": "integer"
                },
                "example": 1705320000
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "rate_limited": {
                    "summary": "Rate limit exceeded",
                    "value": {
                      "code": "RATE_LIMIT_EXCEEDED",
                      "message": "Rate limit exceeded. Please retry after 60 seconds",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - An unexpected error occurred",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "internal_error": {
                    "summary": "Internal server error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "An unexpected error occurred. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "database_error": {
                    "summary": "Database connection error",
                    "value": {
                      "code": "INTERNAL_ERROR",
                      "message": "Service temporarily unavailable. Please try again later",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "options": {
        "summary": "Get allowed methods for device resource",
        "description": "Returns the HTTP methods allowed for this device resource.\nUsed for CORS preflight requests and capability discovery.\n",
        "operationId": "optionsDevice",
        "tags": [
          "Devices"
        ],
        "security": [],
        "parameters": [
          {
            "name": "deviceId",
            "in": "path",
            "required": true,
            "description": "The unique identifier of the device (UUID v7)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          }
        ],
        "responses": {
          "204": {
            "description": "Allowed methods returned",
            "headers": {
              "Allow": {
                "description": "Comma-separated list of allowed HTTP methods",
                "schema": {
                  "type": "string"
                },
                "example": "GET, PUT, PATCH, DELETE, HEAD, OPTIONS"
              },
              "Access-Control-Allow-Methods": {
                "description": "CORS allowed methods",
                "schema": {
                  "type": "string"
                },
                "example": "GET, PUT, PATCH, DELETE, HEAD, OPTIONS"
              },
              "Access-Control-Allow-Headers": {
                "description": "CORS allowed headers",
                "schema": {
                  "type": "string"
                },
                "example": "Authorization, Content-Type, Request-Id, Correlation-Id, API-Version, If-Match, If-None-Match, traceparent, tracestate"
              },
              "Access-Control-Max-Age": {
                "description": "CORS preflight cache duration in seconds",
                "schema": {
                  "type": "integer"
                },
                "example": 86400
              }
            }
          }
        }
      }
    },
    "/liveness": {
      "get": {
        "summary": "Liveness probe",
        "description": "Simple liveness check to determine if the service is running.\nUsed by orchestrators (like Kubernetes) to determine if the container should be restarted.\n",
        "operationId": "livenessCheck",
        "tags": [
          "System"
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Service is alive",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Liveness probe response",
                  "required": [
                    "status",
                    "timestamp",
                    "version"
                  ],
                  "properties": {
                    "status": {
                      "type": "string",
                      "description": "The liveness status of the service",
                      "enum": [
                        "ok",
                        "degraded",
                        "down",
                        "maintenance"
                      ],
                      "example": "ok"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp of the liveness check",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "version": {
                      "type": "string",
                      "description": "Service version",
                      "example": "v1.0.0"
                    }
                  }
                },
                "examples": {
                  "ok": {
                    "summary": "Service is alive and healthy",
                    "value": {
                      "status": "ok",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "version": "v1.0.0"
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Service is not alive",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Liveness probe response",
                  "required": [
                    "status",
                    "timestamp",
                    "version"
                  ],
                  "properties": {
                    "status": {
                      "type": "string",
                      "description": "The liveness status of the service",
                      "enum": [
                        "ok",
                        "degraded",
                        "down",
                        "maintenance"
                      ],
                      "example": "ok"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp of the liveness check",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "version": {
                      "type": "string",
                      "description": "Service version",
                      "example": "v1.0.0"
                    }
                  }
                },
                "examples": {
                  "down": {
                    "summary": "Service is not alive",
                    "value": {
                      "status": "down",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "version": "v1.0.0"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/readiness": {
      "get": {
        "summary": "Readiness probe",
        "description": "Comprehensive readiness check to determine if the service is ready to accept traffic.\nChecks all critical dependencies including database and downstream services.\nUsed by orchestrators to determine if traffic should be routed to this instance.\n",
        "operationId": "readinessCheck",
        "tags": [
          "System"
        ],
        "security": [],
        "responses": {
          "200": {
            "description": "Service is ready to accept traffic",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Readiness probe response with dependency status",
                  "required": [
                    "status",
                    "timestamp",
                    "checks"
                  ],
                  "properties": {
                    "status": {
                      "type": "string",
                      "description": "The overall readiness status of the service",
                      "enum": [
                        "ok",
                        "degraded",
                        "down",
                        "maintenance"
                      ],
                      "example": "ok"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp of the readiness check",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "version": {
                      "type": "string",
                      "description": "Service version (optional)",
                      "example": "v1.0.0"
                    },
                    "checks": {
                      "type": "object",
                      "description": "Status of individual dependency checks grouped by category",
                      "required": [
                        "infra",
                        "services"
                      ],
                      "properties": {
                        "infra": {
                          "type": "object",
                          "description": "Infrastructure dependencies (storage, cache, etc.)",
                          "required": [
                            "storage"
                          ],
                          "properties": {
                            "storage": {
                              "type": "object",
                              "description": "Status of a single dependency",
                              "required": [
                                "status"
                              ],
                              "properties": {
                                "status": {
                                  "type": "string",
                                  "description": "The status of the dependency",
                                  "enum": [
                                    "up",
                                    "down",
                                    "degraded",
                                    "unknown"
                                  ],
                                  "example": "up"
                                },
                                "latencyMs": {
                                  "type": "integer",
                                  "description": "Latency of the last health check in milliseconds",
                                  "minimum": 0,
                                  "example": 5
                                },
                                "message": {
                                  "type": "string",
                                  "description": "Additional information about the dependency status",
                                  "example": "Connected to PostgreSQL 16.1"
                                },
                                "lastChecked": {
                                  "type": "string",
                                  "format": "date-time",
                                  "description": "Timestamp of the last health check for this dependency",
                                  "example": "2024-01-15T10:30:00Z"
                                },
                                "error": {
                                  "type": "string",
                                  "description": "Error message if the dependency is unhealthy",
                                  "example": "connection refused"
                                },
                                "details": {
                                  "type": "object",
                                  "description": "Additional dependency-specific details",
                                  "additionalProperties": true
                                }
                              }
                            },
                            "cache": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "description": "Status of a single dependency",
                                  "required": [
                                    "status"
                                  ],
                                  "properties": {
                                    "status": {
                                      "type": "string",
                                      "description": "The status of the dependency",
                                      "enum": [
                                        "up",
                                        "down",
                                        "degraded",
                                        "unknown"
                                      ],
                                      "example": "up"
                                    },
                                    "latencyMs": {
                                      "type": "integer",
                                      "description": "Latency of the last health check in milliseconds",
                                      "minimum": 0,
                                      "example": 5
                                    },
                                    "message": {
                                      "type": "string",
                                      "description": "Additional information about the dependency status",
                                      "example": "Connected to PostgreSQL 16.1"
                                    },
                                    "lastChecked": {
                                      "type": "string",
                                      "format": "date-time",
                                      "description": "Timestamp of the last health check for this dependency",
                                      "example": "2024-01-15T10:30:00Z"
                                    },
                                    "error": {
                                      "type": "string",
                                      "description": "Error message if the dependency is unhealthy",
                                      "example": "connection refused"
                                    },
                                    "details": {
                                      "type": "object",
                                      "description": "Additional dependency-specific details",
                                      "additionalProperties": true
                                    }
                                  }
                                },
                                {
                                  "type": "object",
                                  "description": "Cache dependency check with pool statistics",
                                  "properties": {
                                    "details": {
                                      "type": "object",
                                      "description": "Cache-specific details",
                                      "properties": {
                                        "totalKeys": {
                                          "type": "integer",
                                          "description": "Total number of keys in the cache",
                                          "minimum": 0,
                                          "example": 1024
                                        },
                                        "poolStats": {
                                          "type": "object",
                                          "description": "Connection pool statistics",
                                          "properties": {
                                            "hits": {
                                              "type": "integer",
                                              "description": "Number of successful pool hits",
                                              "minimum": 0,
                                              "example": 15234
                                            },
                                            "misses": {
                                              "type": "integer",
                                              "description": "Number of pool misses",
                                              "minimum": 0,
                                              "example": 42
                                            },
                                            "timeouts": {
                                              "type": "integer",
                                              "description": "Number of connection timeouts",
                                              "minimum": 0,
                                              "example": 0
                                            },
                                            "waitCount": {
                                              "type": "integer",
                                              "description": "Number of times a connection was waited for",
                                              "minimum": 0,
                                              "example": 128
                                            },
                                            "waitDurationNs": {
                                              "type": "integer",
                                              "description": "Total time spent waiting for connections in nanoseconds",
                                              "minimum": 0,
                                              "example": 5000000
                                            },
                                            "totalConnections": {
                                              "type": "integer",
                                              "description": "Total number of connections in the pool",
                                              "minimum": 0,
                                              "example": 10
                                            },
                                            "idleConnections": {
                                              "type": "integer",
                                              "description": "Number of idle connections in the pool",
                                              "minimum": 0,
                                              "example": 5
                                            },
                                            "staleConnections": {
                                              "type": "integer",
                                              "description": "Number of stale connections removed from the pool",
                                              "minimum": 0,
                                              "example": 2
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        },
                        "services": {
                          "type": "object",
                          "description": "Service dependencies (downstream services)",
                          "required": [
                            "devices"
                          ],
                          "properties": {
                            "devices": {
                              "type": "object",
                              "description": "Status of a single dependency",
                              "required": [
                                "status"
                              ],
                              "properties": {
                                "status": {
                                  "type": "string",
                                  "description": "The status of the dependency",
                                  "enum": [
                                    "up",
                                    "down",
                                    "degraded",
                                    "unknown"
                                  ],
                                  "example": "up"
                                },
                                "latencyMs": {
                                  "type": "integer",
                                  "description": "Latency of the last health check in milliseconds",
                                  "minimum": 0,
                                  "example": 5
                                },
                                "message": {
                                  "type": "string",
                                  "description": "Additional information about the dependency status",
                                  "example": "Connected to PostgreSQL 16.1"
                                },
                                "lastChecked": {
                                  "type": "string",
                                  "format": "date-time",
                                  "description": "Timestamp of the last health check for this dependency",
                                  "example": "2024-01-15T10:30:00Z"
                                },
                                "error": {
                                  "type": "string",
                                  "description": "Error message if the dependency is unhealthy",
                                  "example": "connection refused"
                                },
                                "details": {
                                  "type": "object",
                                  "description": "Additional dependency-specific details",
                                  "additionalProperties": true
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "ok": {
                    "summary": "Service is ready to accept traffic",
                    "value": {
                      "status": "ok",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "version": "v1.0.0",
                      "checks": {
                        "infra": {
                          "storage": {
                            "status": "up",
                            "latencyMs": 5,
                            "message": "Connected to PostgreSQL 16.1",
                            "lastChecked": "2024-01-15T10:30:00Z"
                          },
                          "cache": {
                            "status": "up",
                            "latencyMs": 1,
                            "message": "Redis connected",
                            "lastChecked": "2024-01-15T10:30:00Z",
                            "details": {
                              "totalKeys": 1024,
                              "poolStats": {
                                "hits": 15234,
                                "misses": 42,
                                "timeouts": 0,
                                "waitCount": 128,
                                "waitDurationNs": 5000000,
                                "totalConnections": 10,
                                "idleConnections": 5,
                                "staleConnections": 2
                              }
                            }
                          }
                        },
                        "services": {
                          "devices": {
                            "status": "up",
                            "latencyMs": 2,
                            "message": "gRPC connection established",
                            "lastChecked": "2024-01-15T10:30:00Z"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Service is not ready (dependencies unavailable)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Readiness probe response with dependency status",
                  "required": [
                    "status",
                    "timestamp",
                    "checks"
                  ],
                  "properties": {
                    "status": {
                      "type": "string",
                      "description": "The overall readiness status of the service",
                      "enum": [
                        "ok",
                        "degraded",
                        "down",
                        "maintenance"
                      ],
                      "example": "ok"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp of the readiness check",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "version": {
                      "type": "string",
                      "description": "Service version (optional)",
                      "example": "v1.0.0"
                    },
                    "checks": {
                      "type": "object",
                      "description": "Status of individual dependency checks grouped by category",
                      "required": [
                        "infra",
                        "services"
                      ],
                      "properties": {
                        "infra": {
                          "type": "object",
                          "description": "Infrastructure dependencies (storage, cache, etc.)",
                          "required": [
                            "storage"
                          ],
                          "properties": {
                            "storage": {
                              "type": "object",
                              "description": "Status of a single dependency",
                              "required": [
                                "status"
                              ],
                              "properties": {
                                "status": {
                                  "type": "string",
                                  "description": "The status of the dependency",
                                  "enum": [
                                    "up",
                                    "down",
                                    "degraded",
                                    "unknown"
                                  ],
                                  "example": "up"
                                },
                                "latencyMs": {
                                  "type": "integer",
                                  "description": "Latency of the last health check in milliseconds",
                                  "minimum": 0,
                                  "example": 5
                                },
                                "message": {
                                  "type": "string",
                                  "description": "Additional information about the dependency status",
                                  "example": "Connected to PostgreSQL 16.1"
                                },
                                "lastChecked": {
                                  "type": "string",
                                  "format": "date-time",
                                  "description": "Timestamp of the last health check for this dependency",
                                  "example": "2024-01-15T10:30:00Z"
                                },
                                "error": {
                                  "type": "string",
                                  "description": "Error message if the dependency is unhealthy",
                                  "example": "connection refused"
                                },
                                "details": {
                                  "type": "object",
                                  "description": "Additional dependency-specific details",
                                  "additionalProperties": true
                                }
                              }
                            },
                            "cache": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "description": "Status of a single dependency",
                                  "required": [
                                    "status"
                                  ],
                                  "properties": {
                                    "status": {
                                      "type": "string",
                                      "description": "The status of the dependency",
                                      "enum": [
                                        "up",
                                        "down",
                                        "degraded",
                                        "unknown"
                                      ],
                                      "example": "up"
                                    },
                                    "latencyMs": {
                                      "type": "integer",
                                      "description": "Latency of the last health check in milliseconds",
                                      "minimum": 0,
                                      "example": 5
                                    },
                                    "message": {
                                      "type": "string",
                                      "description": "Additional information about the dependency status",
                                      "example": "Connected to PostgreSQL 16.1"
                                    },
                                    "lastChecked": {
                                      "type": "string",
                                      "format": "date-time",
                                      "description": "Timestamp of the last health check for this dependency",
                                      "example": "2024-01-15T10:30:00Z"
                                    },
                                    "error": {
                                      "type": "string",
                                      "description": "Error message if the dependency is unhealthy",
                                      "example": "connection refused"
                                    },
                                    "details": {
                                      "type": "object",
                                      "description": "Additional dependency-specific details",
                                      "additionalProperties": true
                                    }
                                  }
                                },
                                {
                                  "type": "object",
                                  "description": "Cache dependency check with pool statistics",
                                  "properties": {
                                    "details": {
                                      "type": "object",
                                      "description": "Cache-specific details",
                                      "properties": {
                                        "totalKeys": {
                                          "type": "integer",
                                          "description": "Total number of keys in the cache",
                                          "minimum": 0,
                                          "example": 1024
                                        },
                                        "poolStats": {
                                          "type": "object",
                                          "description": "Connection pool statistics",
                                          "properties": {
                                            "hits": {
                                              "type": "integer",
                                              "description": "Number of successful pool hits",
                                              "minimum": 0,
                                              "example": 15234
                                            },
                                            "misses": {
                                              "type": "integer",
                                              "description": "Number of pool misses",
                                              "minimum": 0,
                                              "example": 42
                                            },
                                            "timeouts": {
                                              "type": "integer",
                                              "description": "Number of connection timeouts",
                                              "minimum": 0,
                                              "example": 0
                                            },
                                            "waitCount": {
                                              "type": "integer",
                                              "description": "Number of times a connection was waited for",
                                              "minimum": 0,
                                              "example": 128
                                            },
                                            "waitDurationNs": {
                                              "type": "integer",
                                              "description": "Total time spent waiting for connections in nanoseconds",
                                              "minimum": 0,
                                              "example": 5000000
                                            },
                                            "totalConnections": {
                                              "type": "integer",
                                              "description": "Total number of connections in the pool",
                                              "minimum": 0,
                                              "example": 10
                                            },
                                            "idleConnections": {
                                              "type": "integer",
                                              "description": "Number of idle connections in the pool",
                                              "minimum": 0,
                                              "example": 5
                                            },
                                            "staleConnections": {
                                              "type": "integer",
                                              "description": "Number of stale connections removed from the pool",
                                              "minimum": 0,
                                              "example": 2
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        },
                        "services": {
                          "type": "object",
                          "description": "Service dependencies (downstream services)",
                          "required": [
                            "devices"
                          ],
                          "properties": {
                            "devices": {
                              "type": "object",
                              "description": "Status of a single dependency",
                              "required": [
                                "status"
                              ],
                              "properties": {
                                "status": {
                                  "type": "string",
                                  "description": "The status of the dependency",
                                  "enum": [
                                    "up",
                                    "down",
                                    "degraded",
                                    "unknown"
                                  ],
                                  "example": "up"
                                },
                                "latencyMs": {
                                  "type": "integer",
                                  "description": "Latency of the last health check in milliseconds",
                                  "minimum": 0,
                                  "example": 5
                                },
                                "message": {
                                  "type": "string",
                                  "description": "Additional information about the dependency status",
                                  "example": "Connected to PostgreSQL 16.1"
                                },
                                "lastChecked": {
                                  "type": "string",
                                  "format": "date-time",
                                  "description": "Timestamp of the last health check for this dependency",
                                  "example": "2024-01-15T10:30:00Z"
                                },
                                "error": {
                                  "type": "string",
                                  "description": "Error message if the dependency is unhealthy",
                                  "example": "connection refused"
                                },
                                "details": {
                                  "type": "object",
                                  "description": "Additional dependency-specific details",
                                  "additionalProperties": true
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "down": {
                    "summary": "Service is not ready (storage down)",
                    "value": {
                      "status": "down",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "version": "v1.0.0",
                      "checks": {
                        "infra": {
                          "storage": {
                            "status": "down",
                            "latencyMs": 0,
                            "message": "Connection refused",
                            "lastChecked": "2024-01-15T10:30:00Z",
                            "error": "dial tcp 127.0.0.1:5432: connection refused"
                          },
                          "cache": {
                            "status": "up",
                            "latencyMs": 1,
                            "message": "Redis connected",
                            "lastChecked": "2024-01-15T10:30:00Z",
                            "details": {
                              "totalKeys": 1024,
                              "poolStats": {
                                "hits": 15234,
                                "misses": 42,
                                "timeouts": 0,
                                "waitCount": 128,
                                "waitDurationNs": 5000000,
                                "totalConnections": 10,
                                "idleConnections": 5,
                                "staleConnections": 2
                              }
                            }
                          }
                        },
                        "services": {
                          "devices": {
                            "status": "up",
                            "latencyMs": 2,
                            "message": "gRPC connection established",
                            "lastChecked": "2024-01-15T10:30:00Z"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health check",
        "description": "Comprehensive health check with detailed system information including uptime.\nThis endpoint provides the same dependency status as readiness but includes\nadditional system metrics. Protected with basic authentication.\n",
        "operationId": "healthCheck",
        "tags": [
          "System"
        ],
        "security": [
          {
            "BasicAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Service health status",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Comprehensive health check response with system metrics",
                  "required": [
                    "status",
                    "timestamp",
                    "version",
                    "uptime",
                    "checks"
                  ],
                  "properties": {
                    "status": {
                      "type": "string",
                      "description": "The overall health status of the service",
                      "enum": [
                        "ok",
                        "degraded",
                        "down",
                        "maintenance"
                      ],
                      "example": "ok"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp of the health check",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "version": {
                      "type": "object",
                      "description": "Version information about the service",
                      "required": [
                        "api",
                        "build"
                      ],
                      "properties": {
                        "api": {
                          "type": "string",
                          "description": "API version",
                          "example": "v1"
                        },
                        "build": {
                          "type": "string",
                          "description": "Build version or commit hash",
                          "example": "1.0.0-abc1234"
                        },
                        "go": {
                          "type": "string",
                          "description": "Go runtime version",
                          "example": "go1.25"
                        }
                      }
                    },
                    "uptime": {
                      "type": "object",
                      "description": "Service uptime information",
                      "required": [
                        "startedAt",
                        "duration"
                      ],
                      "properties": {
                        "startedAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Timestamp when the service started",
                          "example": "2024-01-15T08:00:00Z"
                        },
                        "duration": {
                          "type": "string",
                          "description": "Human-readable uptime duration",
                          "example": "2h30m15s"
                        },
                        "durationSeconds": {
                          "type": "integer",
                          "description": "Uptime in seconds",
                          "minimum": 0,
                          "example": 9015
                        }
                      }
                    },
                    "checks": {
                      "type": "object",
                      "description": "Status of individual dependency checks grouped by category",
                      "required": [
                        "infra",
                        "services"
                      ],
                      "properties": {
                        "infra": {
                          "type": "object",
                          "description": "Infrastructure dependencies (storage, cache, etc.)",
                          "required": [
                            "storage"
                          ],
                          "properties": {
                            "storage": {
                              "type": "object",
                              "description": "Status of a single dependency",
                              "required": [
                                "status"
                              ],
                              "properties": {
                                "status": {
                                  "type": "string",
                                  "description": "The status of the dependency",
                                  "enum": [
                                    "up",
                                    "down",
                                    "degraded",
                                    "unknown"
                                  ],
                                  "example": "up"
                                },
                                "latencyMs": {
                                  "type": "integer",
                                  "description": "Latency of the last health check in milliseconds",
                                  "minimum": 0,
                                  "example": 5
                                },
                                "message": {
                                  "type": "string",
                                  "description": "Additional information about the dependency status",
                                  "example": "Connected to PostgreSQL 16.1"
                                },
                                "lastChecked": {
                                  "type": "string",
                                  "format": "date-time",
                                  "description": "Timestamp of the last health check for this dependency",
                                  "example": "2024-01-15T10:30:00Z"
                                },
                                "error": {
                                  "type": "string",
                                  "description": "Error message if the dependency is unhealthy",
                                  "example": "connection refused"
                                },
                                "details": {
                                  "type": "object",
                                  "description": "Additional dependency-specific details",
                                  "additionalProperties": true
                                }
                              }
                            },
                            "cache": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "description": "Status of a single dependency",
                                  "required": [
                                    "status"
                                  ],
                                  "properties": {
                                    "status": {
                                      "type": "string",
                                      "description": "The status of the dependency",
                                      "enum": [
                                        "up",
                                        "down",
                                        "degraded",
                                        "unknown"
                                      ],
                                      "example": "up"
                                    },
                                    "latencyMs": {
                                      "type": "integer",
                                      "description": "Latency of the last health check in milliseconds",
                                      "minimum": 0,
                                      "example": 5
                                    },
                                    "message": {
                                      "type": "string",
                                      "description": "Additional information about the dependency status",
                                      "example": "Connected to PostgreSQL 16.1"
                                    },
                                    "lastChecked": {
                                      "type": "string",
                                      "format": "date-time",
                                      "description": "Timestamp of the last health check for this dependency",
                                      "example": "2024-01-15T10:30:00Z"
                                    },
                                    "error": {
                                      "type": "string",
                                      "description": "Error message if the dependency is unhealthy",
                                      "example": "connection refused"
                                    },
                                    "details": {
                                      "type": "object",
                                      "description": "Additional dependency-specific details",
                                      "additionalProperties": true
                                    }
                                  }
                                },
                                {
                                  "type": "object",
                                  "description": "Cache dependency check with pool statistics",
                                  "properties": {
                                    "details": {
                                      "type": "object",
                                      "description": "Cache-specific details",
                                      "properties": {
                                        "totalKeys": {
                                          "type": "integer",
                                          "description": "Total number of keys in the cache",
                                          "minimum": 0,
                                          "example": 1024
                                        },
                                        "poolStats": {
                                          "type": "object",
                                          "description": "Connection pool statistics",
                                          "properties": {
                                            "hits": {
                                              "type": "integer",
                                              "description": "Number of successful pool hits",
                                              "minimum": 0,
                                              "example": 15234
                                            },
                                            "misses": {
                                              "type": "integer",
                                              "description": "Number of pool misses",
                                              "minimum": 0,
                                              "example": 42
                                            },
                                            "timeouts": {
                                              "type": "integer",
                                              "description": "Number of connection timeouts",
                                              "minimum": 0,
                                              "example": 0
                                            },
                                            "waitCount": {
                                              "type": "integer",
                                              "description": "Number of times a connection was waited for",
                                              "minimum": 0,
                                              "example": 128
                                            },
                                            "waitDurationNs": {
                                              "type": "integer",
                                              "description": "Total time spent waiting for connections in nanoseconds",
                                              "minimum": 0,
                                              "example": 5000000
                                            },
                                            "totalConnections": {
                                              "type": "integer",
                                              "description": "Total number of connections in the pool",
                                              "minimum": 0,
                                              "example": 10
                                            },
                                            "idleConnections": {
                                              "type": "integer",
                                              "description": "Number of idle connections in the pool",
                                              "minimum": 0,
                                              "example": 5
                                            },
                                            "staleConnections": {
                                              "type": "integer",
                                              "description": "Number of stale connections removed from the pool",
                                              "minimum": 0,
                                              "example": 2
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        },
                        "services": {
                          "type": "object",
                          "description": "Service dependencies (downstream services)",
                          "required": [
                            "devices"
                          ],
                          "properties": {
                            "devices": {
                              "type": "object",
                              "description": "Status of a single dependency",
                              "required": [
                                "status"
                              ],
                              "properties": {
                                "status": {
                                  "type": "string",
                                  "description": "The status of the dependency",
                                  "enum": [
                                    "up",
                                    "down",
                                    "degraded",
                                    "unknown"
                                  ],
                                  "example": "up"
                                },
                                "latencyMs": {
                                  "type": "integer",
                                  "description": "Latency of the last health check in milliseconds",
                                  "minimum": 0,
                                  "example": 5
                                },
                                "message": {
                                  "type": "string",
                                  "description": "Additional information about the dependency status",
                                  "example": "Connected to PostgreSQL 16.1"
                                },
                                "lastChecked": {
                                  "type": "string",
                                  "format": "date-time",
                                  "description": "Timestamp of the last health check for this dependency",
                                  "example": "2024-01-15T10:30:00Z"
                                },
                                "error": {
                                  "type": "string",
                                  "description": "Error message if the dependency is unhealthy",
                                  "example": "connection refused"
                                },
                                "details": {
                                  "type": "object",
                                  "description": "Additional dependency-specific details",
                                  "additionalProperties": true
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "system": {
                      "type": "object",
                      "description": "System resource information",
                      "properties": {
                        "memory": {
                          "type": "object",
                          "description": "Memory usage information",
                          "properties": {
                            "allocMb": {
                              "type": "number",
                              "format": "float",
                              "description": "Current memory allocation in MB",
                              "example": 45.5
                            },
                            "totalAllocMb": {
                              "type": "number",
                              "format": "float",
                              "description": "Total memory allocated since start in MB",
                              "example": 1024.8
                            },
                            "sysMb": {
                              "type": "number",
                              "format": "float",
                              "description": "Total memory obtained from the OS in MB",
                              "example": 72.3
                            },
                            "gcCycles": {
                              "type": "integer",
                              "description": "Number of completed GC cycles",
                              "minimum": 0,
                              "example": 156
                            }
                          }
                        },
                        "goroutines": {
                          "type": "integer",
                          "description": "Number of active goroutines",
                          "minimum": 0,
                          "example": 42
                        },
                        "cpuCores": {
                          "type": "integer",
                          "description": "Number of CPU cores available",
                          "minimum": 1,
                          "example": 8
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "ok": {
                    "summary": "Service is healthy",
                    "value": {
                      "status": "ok",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "version": {
                        "api": "v1",
                        "build": "1.0.0-abc1234",
                        "go": "go1.25"
                      },
                      "uptime": {
                        "startedAt": "2024-01-15T08:00:00Z",
                        "duration": "2h30m15s",
                        "durationSeconds": 9015
                      },
                      "checks": {
                        "infra": {
                          "storage": {
                            "status": "up",
                            "latencyMs": 5,
                            "message": "Connected to PostgreSQL 16.1",
                            "lastChecked": "2024-01-15T10:30:00Z"
                          },
                          "cache": {
                            "status": "up",
                            "latencyMs": 1,
                            "message": "Redis connected",
                            "lastChecked": "2024-01-15T10:30:00Z",
                            "details": {
                              "totalKeys": 1024,
                              "poolStats": {
                                "hits": 15234,
                                "misses": 42,
                                "timeouts": 0,
                                "waitCount": 128,
                                "waitDurationNs": 5000000,
                                "totalConnections": 10,
                                "idleConnections": 5,
                                "staleConnections": 2
                              }
                            }
                          }
                        },
                        "services": {
                          "devices": {
                            "status": "up",
                            "latencyMs": 2,
                            "message": "gRPC connection established",
                            "lastChecked": "2024-01-15T10:30:00Z"
                          }
                        }
                      },
                      "system": {
                        "memory": {
                          "allocMb": 45.5,
                          "totalAllocMb": 1024.8,
                          "sysMb": 72.3,
                          "gcCycles": 156
                        },
                        "goroutines": 42,
                        "cpuCores": 8
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Authentication is required or has failed",
            "headers": {
              "API-Version": {
                "description": "API version used for this response",
                "schema": {
                  "type": "string",
                  "enum": [
                    "v1"
                  ]
                },
                "example": "v1"
              },
              "Request-Id": {
                "description": "Unique request identifier for tracing (per-request, always generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "Correlation-Id": {
                "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
                "schema": {
                  "type": "string",
                  "format": "uuid"
                },
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "traceparent": {
                "description": "W3C Trace Context parent header for distributed tracing",
                "schema": {
                  "type": "string"
                },
                "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
              },
              "tracestate": {
                "description": "W3C Trace Context state header for vendor-specific trace data",
                "schema": {
                  "type": "string"
                },
                "example": "congo=t61rcWkgMzE"
              },
              "WWW-Authenticate": {
                "description": "Authentication scheme information",
                "schema": {
                  "type": "string"
                },
                "example": "Bearer realm=\"devices-api\""
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Standard error response format",
                  "required": [
                    "code",
                    "message",
                    "requestId",
                    "timestamp"
                  ],
                  "properties": {
                    "code": {
                      "type": "string",
                      "description": "Machine-readable error code",
                      "example": "VALIDATION_ERROR"
                    },
                    "message": {
                      "type": "string",
                      "description": "Human-readable error message",
                      "example": "The request body contains invalid data"
                    },
                    "requestId": {
                      "type": "string",
                      "format": "uuid",
                      "description": "Unique request identifier for tracing",
                      "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                    },
                    "traceId": {
                      "type": "string",
                      "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                      "example": "0af7651916cd43dd8448eb211c80319c"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp when the error occurred",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "details": {
                      "type": "array",
                      "description": "Additional error details for validation errors",
                      "items": {
                        "type": "object",
                        "description": "Detailed information about a specific error",
                        "required": [
                          "field",
                          "message"
                        ],
                        "properties": {
                          "field": {
                            "type": "string",
                            "description": "The field that caused the error",
                            "example": "name"
                          },
                          "message": {
                            "type": "string",
                            "description": "Description of what is wrong with the field",
                            "example": "name is required"
                          },
                          "code": {
                            "type": "string",
                            "description": "Machine-readable error code for this specific error",
                            "example": "REQUIRED_FIELD"
                          }
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "missing_token": {
                    "summary": "Missing authentication token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is required",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  },
                  "invalid_token": {
                    "summary": "Invalid or expired token",
                    "value": {
                      "code": "UNAUTHORIZED",
                      "message": "Authentication token is invalid or expired",
                      "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                      "traceId": "0af7651916cd43dd8448eb211c80319c",
                      "timestamp": "2024-01-15T10:30:00Z"
                    }
                  }
                }
              }
            }
          },
          "503": {
            "description": "Service is unhealthy",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Comprehensive health check response with system metrics",
                  "required": [
                    "status",
                    "timestamp",
                    "version",
                    "uptime",
                    "checks"
                  ],
                  "properties": {
                    "status": {
                      "type": "string",
                      "description": "The overall health status of the service",
                      "enum": [
                        "ok",
                        "degraded",
                        "down",
                        "maintenance"
                      ],
                      "example": "ok"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time",
                      "description": "Timestamp of the health check",
                      "example": "2024-01-15T10:30:00Z"
                    },
                    "version": {
                      "type": "object",
                      "description": "Version information about the service",
                      "required": [
                        "api",
                        "build"
                      ],
                      "properties": {
                        "api": {
                          "type": "string",
                          "description": "API version",
                          "example": "v1"
                        },
                        "build": {
                          "type": "string",
                          "description": "Build version or commit hash",
                          "example": "1.0.0-abc1234"
                        },
                        "go": {
                          "type": "string",
                          "description": "Go runtime version",
                          "example": "go1.25"
                        }
                      }
                    },
                    "uptime": {
                      "type": "object",
                      "description": "Service uptime information",
                      "required": [
                        "startedAt",
                        "duration"
                      ],
                      "properties": {
                        "startedAt": {
                          "type": "string",
                          "format": "date-time",
                          "description": "Timestamp when the service started",
                          "example": "2024-01-15T08:00:00Z"
                        },
                        "duration": {
                          "type": "string",
                          "description": "Human-readable uptime duration",
                          "example": "2h30m15s"
                        },
                        "durationSeconds": {
                          "type": "integer",
                          "description": "Uptime in seconds",
                          "minimum": 0,
                          "example": 9015
                        }
                      }
                    },
                    "checks": {
                      "type": "object",
                      "description": "Status of individual dependency checks grouped by category",
                      "required": [
                        "infra",
                        "services"
                      ],
                      "properties": {
                        "infra": {
                          "type": "object",
                          "description": "Infrastructure dependencies (storage, cache, etc.)",
                          "required": [
                            "storage"
                          ],
                          "properties": {
                            "storage": {
                              "type": "object",
                              "description": "Status of a single dependency",
                              "required": [
                                "status"
                              ],
                              "properties": {
                                "status": {
                                  "type": "string",
                                  "description": "The status of the dependency",
                                  "enum": [
                                    "up",
                                    "down",
                                    "degraded",
                                    "unknown"
                                  ],
                                  "example": "up"
                                },
                                "latencyMs": {
                                  "type": "integer",
                                  "description": "Latency of the last health check in milliseconds",
                                  "minimum": 0,
                                  "example": 5
                                },
                                "message": {
                                  "type": "string",
                                  "description": "Additional information about the dependency status",
                                  "example": "Connected to PostgreSQL 16.1"
                                },
                                "lastChecked": {
                                  "type": "string",
                                  "format": "date-time",
                                  "description": "Timestamp of the last health check for this dependency",
                                  "example": "2024-01-15T10:30:00Z"
                                },
                                "error": {
                                  "type": "string",
                                  "description": "Error message if the dependency is unhealthy",
                                  "example": "connection refused"
                                },
                                "details": {
                                  "type": "object",
                                  "description": "Additional dependency-specific details",
                                  "additionalProperties": true
                                }
                              }
                            },
                            "cache": {
                              "allOf": [
                                {
                                  "type": "object",
                                  "description": "Status of a single dependency",
                                  "required": [
                                    "status"
                                  ],
                                  "properties": {
                                    "status": {
                                      "type": "string",
                                      "description": "The status of the dependency",
                                      "enum": [
                                        "up",
                                        "down",
                                        "degraded",
                                        "unknown"
                                      ],
                                      "example": "up"
                                    },
                                    "latencyMs": {
                                      "type": "integer",
                                      "description": "Latency of the last health check in milliseconds",
                                      "minimum": 0,
                                      "example": 5
                                    },
                                    "message": {
                                      "type": "string",
                                      "description": "Additional information about the dependency status",
                                      "example": "Connected to PostgreSQL 16.1"
                                    },
                                    "lastChecked": {
                                      "type": "string",
                                      "format": "date-time",
                                      "description": "Timestamp of the last health check for this dependency",
                                      "example": "2024-01-15T10:30:00Z"
                                    },
                                    "error": {
                                      "type": "string",
                                      "description": "Error message if the dependency is unhealthy",
                                      "example": "connection refused"
                                    },
                                    "details": {
                                      "type": "object",
                                      "description": "Additional dependency-specific details",
                                      "additionalProperties": true
                                    }
                                  }
                                },
                                {
                                  "type": "object",
                                  "description": "Cache dependency check with pool statistics",
                                  "properties": {
                                    "details": {
                                      "type": "object",
                                      "description": "Cache-specific details",
                                      "properties": {
                                        "totalKeys": {
                                          "type": "integer",
                                          "description": "Total number of keys in the cache",
                                          "minimum": 0,
                                          "example": 1024
                                        },
                                        "poolStats": {
                                          "type": "object",
                                          "description": "Connection pool statistics",
                                          "properties": {
                                            "hits": {
                                              "type": "integer",
                                              "description": "Number of successful pool hits",
                                              "minimum": 0,
                                              "example": 15234
                                            },
                                            "misses": {
                                              "type": "integer",
                                              "description": "Number of pool misses",
                                              "minimum": 0,
                                              "example": 42
                                            },
                                            "timeouts": {
                                              "type": "integer",
                                              "description": "Number of connection timeouts",
                                              "minimum": 0,
                                              "example": 0
                                            },
                                            "waitCount": {
                                              "type": "integer",
                                              "description": "Number of times a connection was waited for",
                                              "minimum": 0,
                                              "example": 128
                                            },
                                            "waitDurationNs": {
                                              "type": "integer",
                                              "description": "Total time spent waiting for connections in nanoseconds",
                                              "minimum": 0,
                                              "example": 5000000
                                            },
                                            "totalConnections": {
                                              "type": "integer",
                                              "description": "Total number of connections in the pool",
                                              "minimum": 0,
                                              "example": 10
                                            },
                                            "idleConnections": {
                                              "type": "integer",
                                              "description": "Number of idle connections in the pool",
                                              "minimum": 0,
                                              "example": 5
                                            },
                                            "staleConnections": {
                                              "type": "integer",
                                              "description": "Number of stale connections removed from the pool",
                                              "minimum": 0,
                                              "example": 2
                                            }
                                          }
                                        }
                                      }
                                    }
                                  }
                                }
                              ]
                            }
                          }
                        },
                        "services": {
                          "type": "object",
                          "description": "Service dependencies (downstream services)",
                          "required": [
                            "devices"
                          ],
                          "properties": {
                            "devices": {
                              "type": "object",
                              "description": "Status of a single dependency",
                              "required": [
                                "status"
                              ],
                              "properties": {
                                "status": {
                                  "type": "string",
                                  "description": "The status of the dependency",
                                  "enum": [
                                    "up",
                                    "down",
                                    "degraded",
                                    "unknown"
                                  ],
                                  "example": "up"
                                },
                                "latencyMs": {
                                  "type": "integer",
                                  "description": "Latency of the last health check in milliseconds",
                                  "minimum": 0,
                                  "example": 5
                                },
                                "message": {
                                  "type": "string",
                                  "description": "Additional information about the dependency status",
                                  "example": "Connected to PostgreSQL 16.1"
                                },
                                "lastChecked": {
                                  "type": "string",
                                  "format": "date-time",
                                  "description": "Timestamp of the last health check for this dependency",
                                  "example": "2024-01-15T10:30:00Z"
                                },
                                "error": {
                                  "type": "string",
                                  "description": "Error message if the dependency is unhealthy",
                                  "example": "connection refused"
                                },
                                "details": {
                                  "type": "object",
                                  "description": "Additional dependency-specific details",
                                  "additionalProperties": true
                                }
                              }
                            }
                          }
                        }
                      }
                    },
                    "system": {
                      "type": "object",
                      "description": "System resource information",
                      "properties": {
                        "memory": {
                          "type": "object",
                          "description": "Memory usage information",
                          "properties": {
                            "allocMb": {
                              "type": "number",
                              "format": "float",
                              "description": "Current memory allocation in MB",
                              "example": 45.5
                            },
                            "totalAllocMb": {
                              "type": "number",
                              "format": "float",
                              "description": "Total memory allocated since start in MB",
                              "example": 1024.8
                            },
                            "sysMb": {
                              "type": "number",
                              "format": "float",
                              "description": "Total memory obtained from the OS in MB",
                              "example": 72.3
                            },
                            "gcCycles": {
                              "type": "integer",
                              "description": "Number of completed GC cycles",
                              "minimum": 0,
                              "example": 156
                            }
                          }
                        },
                        "goroutines": {
                          "type": "integer",
                          "description": "Number of active goroutines",
                          "minimum": 0,
                          "example": 42
                        },
                        "cpuCores": {
                          "type": "integer",
                          "description": "Number of CPU cores available",
                          "minimum": 1,
                          "example": 8
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "down": {
                    "summary": "Service is unhealthy",
                    "value": {
                      "status": "down",
                      "timestamp": "2024-01-15T10:30:00Z",
                      "version": {
                        "api": "v1",
                        "build": "1.0.0-abc1234",
                        "go": "go1.25"
                      },
                      "uptime": {
                        "startedAt": "2024-01-15T08:00:00Z",
                        "duration": "2h30m15s",
                        "durationSeconds": 9015
                      },
                      "checks": {
                        "infra": {
                          "storage": {
                            "status": "down",
                            "latencyMs": 0,
                            "message": "Connection refused",
                            "lastChecked": "2024-01-15T10:30:00Z",
                            "error": "dial tcp 127.0.0.1:5432: connection refused"
                          },
                          "cache": {
                            "status": "up",
                            "latencyMs": 1,
                            "message": "Redis connected",
                            "lastChecked": "2024-01-15T10:30:00Z",
                            "details": {
                              "totalKeys": 1024,
                              "poolStats": {
                                "hits": 15234,
                                "misses": 42,
                                "timeouts": 0,
                                "waitCount": 128,
                                "waitDurationNs": 5000000,
                                "totalConnections": 10,
                                "idleConnections": 5,
                                "staleConnections": 2
                              }
                            }
                          }
                        },
                        "services": {
                          "devices": {
                            "status": "up",
                            "latencyMs": 2,
                            "message": "gRPC connection established",
                            "lastChecked": "2024-01-15T10:30:00Z"
                          }
                        }
                      },
                      "system": {
                        "memory": {
                          "allocMb": 45.5,
                          "totalAllocMb": 1024.8,
                          "sysMb": 72.3,
                          "gcCycles": 156
                        },
                        "goroutines": 42,
                        "cpuCores": 8
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "parameters": {
      "ApiVersionHeader": {
        "name": "API-Version",
        "in": "header",
        "required": false,
        "description": "API version to use for this request. If not specified, defaults to v1.\nSupported versions: v1\n",
        "schema": {
          "type": "string",
          "enum": [
            "v1"
          ],
          "default": "v1"
        },
        "example": "v1"
      },
      "RequestIdHeader": {
        "name": "Request-Id",
        "in": "header",
        "required": false,
        "description": "Unique request identifier for tracing and debugging purposes (per-request, always generated server-side).\nRFC 6648 compliant (no X- prefix).\n",
        "schema": {
          "type": "string",
          "format": "uuid"
        },
        "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
      },
      "CorrelationIdHeader": {
        "name": "Correlation-Id",
        "in": "header",
        "required": false,
        "description": "Correlation identifier for tracing requests across multiple services.\nCan be provided by client or generated server-side if not provided.\nRFC 6648 compliant (no X- prefix).\n",
        "schema": {
          "type": "string",
          "format": "uuid"
        },
        "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
      },
      "DeviceIdParam": {
        "name": "deviceId",
        "in": "path",
        "required": true,
        "description": "The unique identifier of the device (UUID v7)",
        "schema": {
          "type": "string",
          "format": "uuid"
        },
        "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
      },
      "PageParam": {
        "name": "page",
        "in": "query",
        "required": false,
        "description": "Page number for pagination (1-indexed)",
        "schema": {
          "type": "integer",
          "minimum": 1,
          "default": 1
        },
        "example": 1
      },
      "SizeParam": {
        "name": "size",
        "in": "query",
        "required": false,
        "description": "Number of items per page",
        "schema": {
          "type": "integer",
          "minimum": 1,
          "maximum": 100,
          "default": 20
        },
        "example": 20
      },
      "BrandFilterParam": {
        "name": "brand",
        "in": "query",
        "required": false,
        "description": "Filter by brand(s). Comma-separated for OR matching.\nExample: ?brand=Apple,Samsung\n",
        "schema": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "maxItems": 10
        },
        "style": "form",
        "explode": false,
        "example": "Apple"
      },
      "StateFilterParam": {
        "name": "state",
        "in": "query",
        "required": false,
        "description": "Filter by state(s). Comma-separated for OR matching.\nExample: ?state=available,inactive\n",
        "schema": {
          "type": "array",
          "items": {
            "type": "string",
            "description": "The current state of the device",
            "enum": [
              "available",
              "in-use",
              "inactive"
            ],
            "example": "available",
            "x-enum-descriptions": {
              "available": "Device is available for use",
              "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
              "inactive": "Device is inactive and not available for use"
            }
          },
          "maxItems": 3
        },
        "style": "form",
        "explode": false,
        "example": "available"
      },
      "SortParam": {
        "name": "sort",
        "in": "query",
        "required": false,
        "description": "Fields to sort results by. Comma-separated for multi-field sorting.\nPrefix with `-` for descending order.\nSupported fields: name, brand, state, createdAt, updatedAt\nExample: ?sort=-createdAt,name (sort by createdAt DESC, then name ASC)\n",
        "schema": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^-?(name|brand|state|createdAt|updatedAt)$"
          },
          "maxItems": 5,
          "default": [
            "-createdAt"
          ]
        },
        "style": "form",
        "explode": false,
        "example": "-createdAt,name"
      },
      "FieldsParam": {
        "name": "fields",
        "in": "query",
        "required": false,
        "description": "Field projection to control which fields are returned in the response.\n\n**Default behavior (no fields parameter):**\nReturns essential fields only: `id`, `name`, `brand`, `state`\n\n**With fields parameter:**\nReturns only the specified fields. Use comma-separated list.\n\n**Supported fields:**\n- `id` - Device unique identifier (always included)\n- `name` - Device name\n- `brand` - Device manufacturer\n- `state` - Device state (available, in-use, inactive)\n- `createdAt` - Creation timestamp\n- `updatedAt` - Last update timestamp\n- `links` - HATEOAS navigation links\n\n**Nested fields syntax:**\nUse `field:(subfield1,subfield2)` for nested objects.\nExample: `links:(self)` returns only the self link.\n",
        "schema": {
          "type": "string",
          "pattern": "^[a-zA-Z,:()]+$"
        },
        "examples": {
          "essential": {
            "value": "id,name,brand,state",
            "summary": "Essential fields only"
          },
          "withTimestamps": {
            "value": "id,name,brand,state,createdAt,updatedAt",
            "summary": "Include timestamps"
          },
          "withLinks": {
            "value": "id,name,state,links:(self)",
            "summary": "Include HATEOAS links"
          }
        }
      },
      "IfMatchHeader": {
        "name": "If-Match",
        "in": "header",
        "required": false,
        "description": "ETag value for optimistic concurrency control.\nThe request will only succeed if the current resource ETag matches this value.\n",
        "schema": {
          "type": "string"
        },
        "example": "\"a1b2c3d4e5f6\""
      },
      "IfNoneMatchHeader": {
        "name": "If-None-Match",
        "in": "header",
        "required": false,
        "description": "ETag value for conditional requests.\nFor GET: Returns 304 Not Modified if the resource hasn't changed.\nFor PUT/PATCH: Prevents updates if resource exists (use \"*\").\n",
        "schema": {
          "type": "string"
        },
        "example": "\"a1b2c3d4e5f6\""
      },
      "AuthorizationHeader": {
        "name": "Authorization",
        "in": "header",
        "required": true,
        "description": "PASETO v4 bearer token for authentication.\nFormat: Bearer v4.public.{payload}.{signature}\n",
        "schema": {
          "type": "string",
          "pattern": "^Bearer v4\\.(public|local)\\..+$"
        },
        "example": "Bearer v4.public.eyJleHAiOiIyMDI0LTAxLTE1VDEyOjAwOjAwWiIsImlhdCI6IjIwMjQtMDEtMTVUMTA6MDA6MDBaIiwic3ViIjoiMDE5MjM0YTUtNmI3Yy04ZDllLTBmMTItMzQ1Njc4OTBhYmNkIn0.signature"
      },
      "IdempotencyKeyHeader": {
        "name": "Idempotency-Key",
        "in": "header",
        "required": true,
        "description": "Unique key to ensure idempotent POST requests.\nIf the same key is sent again within the TTL window (24 hours),\nthe server returns the cached response instead of creating a duplicate.\n\n**Requirements:**\n- Must be a valid UUID v7\n- Must be unique per logical operation\n- Cached for 24 hours\n",
        "schema": {
          "type": "string",
          "format": "uuid"
        },
        "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
      },
      "AcceptEncodingHeader": {
        "name": "Accept-Encoding",
        "in": "header",
        "required": false,
        "description": "Accepted compression algorithms for the response.\nServer will use the best matching algorithm.\n",
        "schema": {
          "type": "string"
        },
        "example": "gzip, deflate, br"
      },
      "AcceptHeader": {
        "name": "Accept",
        "in": "header",
        "required": false,
        "description": "Media type(s) acceptable for the response.\nCurrently only `application/json` is supported.\n\nIf not specified, defaults to `application/json`.\nIf an unsupported media type is requested, returns 406 Not Acceptable.\n",
        "schema": {
          "type": "string",
          "default": "application/json"
        },
        "example": "application/json"
      },
      "TraceparentHeader": {
        "name": "traceparent",
        "in": "header",
        "required": false,
        "description": "W3C Trace Context header for distributed tracing (OpenTelemetry compatible).\n\nFormat: `{version}-{trace-id}-{parent-id}-{trace-flags}`\n- version: 2 hex digits (always \"00\")\n- trace-id: 32 hex digits (16 bytes)\n- parent-id: 16 hex digits (8 bytes)\n- trace-flags: 2 hex digits (sampling flag)\n\nIf not provided, the server will generate a new trace context.\n",
        "schema": {
          "type": "string",
          "pattern": "^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9a-f]{2}$"
        },
        "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
      },
      "TracestateHeader": {
        "name": "tracestate",
        "in": "header",
        "required": false,
        "description": "W3C Trace Context state header for vendor-specific trace data.\nComma-separated list of key=value pairs.\n",
        "schema": {
          "type": "string"
        },
        "example": "congo=t61rcWkgMzE,rojo=00f067aa0ba902b7"
      }
    },
    "headers": {
      "ApiVersionHeader": {
        "description": "API version used for this response",
        "schema": {
          "type": "string",
          "enum": [
            "v1"
          ]
        },
        "example": "v1"
      },
      "LocationHeader": {
        "description": "URI of the newly created resource",
        "schema": {
          "type": "string",
          "format": "uri"
        },
        "example": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
      },
      "RequestIdHeader": {
        "description": "Unique request identifier for tracing (per-request, always generated server-side)",
        "schema": {
          "type": "string",
          "format": "uuid"
        },
        "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
      },
      "CorrelationIdHeader": {
        "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
        "schema": {
          "type": "string",
          "format": "uuid"
        },
        "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
      },
      "ETagHeader": {
        "description": "Entity tag for cache validation and optimistic concurrency control.\nUse this value in If-Match or If-None-Match headers for subsequent requests.\n",
        "schema": {
          "type": "string"
        },
        "example": "\"a1b2c3d4e5f6\""
      },
      "CacheControlHeader": {
        "description": "Cache directives for the response.\n- `private`: Response is specific to the user\n- `max-age`: Maximum time in seconds the response can be cached\n- `no-cache`: Must revalidate with server before using cached response\n",
        "schema": {
          "type": "string"
        },
        "example": "private, max-age=300"
      },
      "LastModifiedHeader": {
        "description": "Timestamp when the resource was last modified",
        "schema": {
          "type": "string",
          "format": "date-time"
        },
        "example": "Wed, 15 Jan 2024 14:45:00 GMT"
      },
      "RateLimitLimitHeader": {
        "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
        "schema": {
          "type": "integer"
        },
        "example": 100
      },
      "RateLimitRemainingHeader": {
        "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
        "schema": {
          "type": "integer"
        },
        "example": 95
      },
      "RateLimitResetHeader": {
        "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
        "schema": {
          "type": "integer"
        },
        "example": 1705320000
      },
      "RetryAfterHeader": {
        "description": "Number of seconds to wait before retrying the request",
        "schema": {
          "type": "integer"
        },
        "example": 60
      },
      "ContentEncodingHeader": {
        "description": "Compression algorithm used for the response body",
        "schema": {
          "type": "string",
          "enum": [
            "gzip",
            "deflate",
            "br",
            "identity"
          ]
        },
        "example": "gzip"
      },
      "VaryHeader": {
        "description": "Headers that affect response caching and content negotiation",
        "schema": {
          "type": "string"
        },
        "example": "Accept-Encoding, Authorization"
      },
      "TraceparentResponseHeader": {
        "description": "W3C Trace Context parent header for distributed tracing",
        "schema": {
          "type": "string"
        },
        "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
      },
      "TracestateResponseHeader": {
        "description": "W3C Trace Context state header for vendor-specific trace data",
        "schema": {
          "type": "string"
        },
        "example": "congo=t61rcWkgMzE"
      }
    },
    "securitySchemes": {
      "PasetoAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "PASETO",
        "description": "PASETO (Platform-Agnostic Security Tokens) v4 token.\nA secure, stateless token format for authentication.\nFormat: Bearer v4.public.{payload}.{signature}\n"
      },
      "BasicAuth": {
        "type": "http",
        "scheme": "basic",
        "description": "Basic HTTP authentication for administrative endpoints"
      }
    },
    "schemas": {
      "DeviceState": {
        "type": "string",
        "description": "The current state of the device",
        "enum": [
          "available",
          "in-use",
          "inactive"
        ],
        "example": "available",
        "x-enum-descriptions": {
          "available": "Device is available for use",
          "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
          "inactive": "Device is inactive and not available for use"
        }
      },
      "CreateDeviceRequest": {
        "type": "object",
        "description": "Request body for creating a new device",
        "required": [
          "name",
          "brand"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "The name of the device",
            "minLength": 1,
            "maxLength": 255,
            "example": "iPhone 15 Pro"
          },
          "brand": {
            "type": "string",
            "description": "The brand/manufacturer of the device",
            "minLength": 1,
            "maxLength": 100,
            "example": "Apple"
          },
          "state": {
            "description": "Initial state of the device (defaults to \"available\" if not provided)",
            "default": "available",
            "type": "string",
            "enum": [
              "available",
              "in-use",
              "inactive"
            ],
            "example": "available",
            "x-enum-descriptions": {
              "available": "Device is available for use",
              "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
              "inactive": "Device is inactive and not available for use"
            }
          }
        }
      },
      "UpdateDeviceRequest": {
        "type": "object",
        "description": "Request body for fully updating a device (PUT)",
        "required": [
          "name",
          "brand",
          "state"
        ],
        "properties": {
          "name": {
            "type": "string",
            "description": "The name of the device.\n**Note:** Cannot be updated if the device state is \"in-use\"\n",
            "minLength": 1,
            "maxLength": 255,
            "example": "iPhone 15 Pro Max"
          },
          "brand": {
            "type": "string",
            "description": "The brand/manufacturer of the device.\n**Note:** Cannot be updated if the device state is \"in-use\"\n",
            "minLength": 1,
            "maxLength": 100,
            "example": "Apple"
          },
          "state": {
            "description": "The state of the device",
            "type": "string",
            "enum": [
              "available",
              "in-use",
              "inactive"
            ],
            "example": "available",
            "x-enum-descriptions": {
              "available": "Device is available for use",
              "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
              "inactive": "Device is inactive and not available for use"
            }
          }
        }
      },
      "PatchDeviceRequest": {
        "type": "object",
        "description": "Request body for partially updating a device (PATCH)",
        "minProperties": 1,
        "properties": {
          "name": {
            "type": "string",
            "description": "The name of the device.\n**Note:** Cannot be updated if the device state is \"in-use\"\n",
            "minLength": 1,
            "maxLength": 255,
            "example": "iPhone 15 Pro Max"
          },
          "brand": {
            "type": "string",
            "description": "The brand/manufacturer of the device.\n**Note:** Cannot be updated if the device state is \"in-use\"\n",
            "minLength": 1,
            "maxLength": 100,
            "example": "Apple"
          },
          "state": {
            "description": "The state of the device",
            "type": "string",
            "enum": [
              "available",
              "in-use",
              "inactive"
            ],
            "example": "available",
            "x-enum-descriptions": {
              "available": "Device is available for use",
              "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
              "inactive": "Device is inactive and not available for use"
            }
          }
        }
      },
      "DeviceResponse": {
        "type": "object",
        "description": "Response containing a single device",
        "required": [
          "data"
        ],
        "properties": {
          "data": {
            "type": "object",
            "description": "A device resource",
            "required": [
              "id",
              "name",
              "brand",
              "state",
              "createdAt"
            ],
            "properties": {
              "id": {
                "type": "string",
                "format": "uuid",
                "description": "Unique identifier for the device (UUID v7)",
                "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
              },
              "name": {
                "type": "string",
                "description": "The name of the device",
                "minLength": 1,
                "maxLength": 255,
                "example": "iPhone 15 Pro"
              },
              "brand": {
                "type": "string",
                "description": "The brand/manufacturer of the device",
                "minLength": 1,
                "maxLength": 100,
                "example": "Apple"
              },
              "state": {
                "type": "string",
                "description": "The current state of the device",
                "enum": [
                  "available",
                  "in-use",
                  "inactive"
                ],
                "example": "available",
                "x-enum-descriptions": {
                  "available": "Device is available for use",
                  "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
                  "inactive": "Device is inactive and not available for use"
                }
              },
              "createdAt": {
                "type": "string",
                "format": "date-time",
                "description": "Timestamp when the device was created (immutable)",
                "example": "2024-01-15T10:30:00Z"
              },
              "updatedAt": {
                "type": "string",
                "format": "date-time",
                "description": "Timestamp when the device was last updated",
                "example": "2024-01-15T14:45:00Z"
              },
              "links": {
                "type": "object",
                "description": "HATEOAS links for device navigation",
                "properties": {
                  "self": {
                    "type": "string",
                    "format": "uri-reference",
                    "description": "Link to this device resource",
                    "example": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
                  }
                }
              }
            }
          }
        }
      },
      "DeviceListResponse": {
        "type": "object",
        "description": "Response containing a paginated list of devices",
        "required": [
          "data",
          "pagination"
        ],
        "properties": {
          "data": {
            "type": "array",
            "description": "List of devices",
            "items": {
              "type": "object",
              "description": "A device resource",
              "required": [
                "id",
                "name",
                "brand",
                "state",
                "createdAt"
              ],
              "properties": {
                "id": {
                  "type": "string",
                  "format": "uuid",
                  "description": "Unique identifier for the device (UUID v7)",
                  "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                },
                "name": {
                  "type": "string",
                  "description": "The name of the device",
                  "minLength": 1,
                  "maxLength": 255,
                  "example": "iPhone 15 Pro"
                },
                "brand": {
                  "type": "string",
                  "description": "The brand/manufacturer of the device",
                  "minLength": 1,
                  "maxLength": 100,
                  "example": "Apple"
                },
                "state": {
                  "type": "string",
                  "description": "The current state of the device",
                  "enum": [
                    "available",
                    "in-use",
                    "inactive"
                  ],
                  "example": "available",
                  "x-enum-descriptions": {
                    "available": "Device is available for use",
                    "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
                    "inactive": "Device is inactive and not available for use"
                  }
                },
                "createdAt": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the device was created (immutable)",
                  "example": "2024-01-15T10:30:00Z"
                },
                "updatedAt": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the device was last updated",
                  "example": "2024-01-15T14:45:00Z"
                },
                "links": {
                  "type": "object",
                  "description": "HATEOAS links for device navigation",
                  "properties": {
                    "self": {
                      "type": "string",
                      "format": "uri-reference",
                      "description": "Link to this device resource",
                      "example": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
                    }
                  }
                }
              }
            }
          },
          "pagination": {
            "type": "object",
            "description": "Pagination metadata for list responses",
            "required": [
              "page",
              "size",
              "totalItems",
              "totalPages"
            ],
            "properties": {
              "page": {
                "type": "integer",
                "description": "Current page number (1-indexed)",
                "minimum": 1,
                "example": 1
              },
              "size": {
                "type": "integer",
                "description": "Number of items per page",
                "minimum": 1,
                "maximum": 100,
                "example": 20
              },
              "totalItems": {
                "type": "integer",
                "description": "Total number of items across all pages",
                "minimum": 0,
                "example": 150
              },
              "totalPages": {
                "type": "integer",
                "description": "Total number of pages",
                "minimum": 0,
                "example": 8
              },
              "hasNext": {
                "type": "boolean",
                "description": "Whether there is a next page",
                "example": true
              },
              "hasPrevious": {
                "type": "boolean",
                "description": "Whether there is a previous page",
                "example": false
              },
              "links": {
                "type": "object",
                "description": "HATEOAS links for pagination navigation",
                "properties": {
                  "self": {
                    "type": "string",
                    "format": "uri-reference",
                    "description": "Link to the current page",
                    "example": "/devices?page=1&size=20"
                  },
                  "first": {
                    "type": "string",
                    "format": "uri-reference",
                    "description": "Link to the first page",
                    "example": "/devices?page=1&size=20"
                  },
                  "last": {
                    "type": "string",
                    "format": "uri-reference",
                    "description": "Link to the last page",
                    "example": "/devices?page=8&size=20"
                  },
                  "next": {
                    "type": "string",
                    "format": "uri-reference",
                    "nullable": true,
                    "description": "Link to the next page (null if on last page)",
                    "example": "/devices?page=2&size=20"
                  },
                  "previous": {
                    "type": "string",
                    "format": "uri-reference",
                    "nullable": true,
                    "description": "Link to the previous page (null if on first page)",
                    "example": null
                  }
                }
              }
            }
          },
          "filters": {
            "type": "object",
            "description": "Filters that were applied to this request",
            "properties": {
              "brand": {
                "type": "string",
                "nullable": true,
                "description": "Brand filter that was applied",
                "example": "Apple"
              },
              "state": {
                "type": "string",
                "nullable": true,
                "description": "State filter that was applied",
                "enum": [
                  "available",
                  "in-use",
                  "inactive"
                ],
                "example": "available"
              }
            }
          }
        }
      },
      "LivenessResponse": {
        "type": "object",
        "description": "Liveness probe response",
        "required": [
          "status",
          "timestamp",
          "version"
        ],
        "properties": {
          "status": {
            "type": "string",
            "description": "The liveness status of the service",
            "enum": [
              "ok",
              "degraded",
              "down",
              "maintenance"
            ],
            "example": "ok"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of the liveness check",
            "example": "2024-01-15T10:30:00Z"
          },
          "version": {
            "type": "string",
            "description": "Service version",
            "example": "v1.0.0"
          }
        }
      },
      "ReadinessResponse": {
        "type": "object",
        "description": "Readiness probe response with dependency status",
        "required": [
          "status",
          "timestamp",
          "checks"
        ],
        "properties": {
          "status": {
            "type": "string",
            "description": "The overall readiness status of the service",
            "enum": [
              "ok",
              "degraded",
              "down",
              "maintenance"
            ],
            "example": "ok"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of the readiness check",
            "example": "2024-01-15T10:30:00Z"
          },
          "version": {
            "type": "string",
            "description": "Service version (optional)",
            "example": "v1.0.0"
          },
          "checks": {
            "type": "object",
            "description": "Status of individual dependency checks grouped by category",
            "required": [
              "infra",
              "services"
            ],
            "properties": {
              "infra": {
                "type": "object",
                "description": "Infrastructure dependencies (storage, cache, etc.)",
                "required": [
                  "storage"
                ],
                "properties": {
                  "storage": {
                    "type": "object",
                    "description": "Status of a single dependency",
                    "required": [
                      "status"
                    ],
                    "properties": {
                      "status": {
                        "type": "string",
                        "description": "The status of the dependency",
                        "enum": [
                          "up",
                          "down",
                          "degraded",
                          "unknown"
                        ],
                        "example": "up"
                      },
                      "latencyMs": {
                        "type": "integer",
                        "description": "Latency of the last health check in milliseconds",
                        "minimum": 0,
                        "example": 5
                      },
                      "message": {
                        "type": "string",
                        "description": "Additional information about the dependency status",
                        "example": "Connected to PostgreSQL 16.1"
                      },
                      "lastChecked": {
                        "type": "string",
                        "format": "date-time",
                        "description": "Timestamp of the last health check for this dependency",
                        "example": "2024-01-15T10:30:00Z"
                      },
                      "error": {
                        "type": "string",
                        "description": "Error message if the dependency is unhealthy",
                        "example": "connection refused"
                      },
                      "details": {
                        "type": "object",
                        "description": "Additional dependency-specific details",
                        "additionalProperties": true
                      }
                    }
                  },
                  "cache": {
                    "allOf": [
                      {
                        "type": "object",
                        "description": "Status of a single dependency",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string",
                            "description": "The status of the dependency",
                            "enum": [
                              "up",
                              "down",
                              "degraded",
                              "unknown"
                            ],
                            "example": "up"
                          },
                          "latencyMs": {
                            "type": "integer",
                            "description": "Latency of the last health check in milliseconds",
                            "minimum": 0,
                            "example": 5
                          },
                          "message": {
                            "type": "string",
                            "description": "Additional information about the dependency status",
                            "example": "Connected to PostgreSQL 16.1"
                          },
                          "lastChecked": {
                            "type": "string",
                            "format": "date-time",
                            "description": "Timestamp of the last health check for this dependency",
                            "example": "2024-01-15T10:30:00Z"
                          },
                          "error": {
                            "type": "string",
                            "description": "Error message if the dependency is unhealthy",
                            "example": "connection refused"
                          },
                          "details": {
                            "type": "object",
                            "description": "Additional dependency-specific details",
                            "additionalProperties": true
                          }
                        }
                      },
                      {
                        "type": "object",
                        "description": "Cache dependency check with pool statistics",
                        "properties": {
                          "details": {
                            "type": "object",
                            "description": "Cache-specific details",
                            "properties": {
                              "totalKeys": {
                                "type": "integer",
                                "description": "Total number of keys in the cache",
                                "minimum": 0,
                                "example": 1024
                              },
                              "poolStats": {
                                "type": "object",
                                "description": "Connection pool statistics",
                                "properties": {
                                  "hits": {
                                    "type": "integer",
                                    "description": "Number of successful pool hits",
                                    "minimum": 0,
                                    "example": 15234
                                  },
                                  "misses": {
                                    "type": "integer",
                                    "description": "Number of pool misses",
                                    "minimum": 0,
                                    "example": 42
                                  },
                                  "timeouts": {
                                    "type": "integer",
                                    "description": "Number of connection timeouts",
                                    "minimum": 0,
                                    "example": 0
                                  },
                                  "waitCount": {
                                    "type": "integer",
                                    "description": "Number of times a connection was waited for",
                                    "minimum": 0,
                                    "example": 128
                                  },
                                  "waitDurationNs": {
                                    "type": "integer",
                                    "description": "Total time spent waiting for connections in nanoseconds",
                                    "minimum": 0,
                                    "example": 5000000
                                  },
                                  "totalConnections": {
                                    "type": "integer",
                                    "description": "Total number of connections in the pool",
                                    "minimum": 0,
                                    "example": 10
                                  },
                                  "idleConnections": {
                                    "type": "integer",
                                    "description": "Number of idle connections in the pool",
                                    "minimum": 0,
                                    "example": 5
                                  },
                                  "staleConnections": {
                                    "type": "integer",
                                    "description": "Number of stale connections removed from the pool",
                                    "minimum": 0,
                                    "example": 2
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    ]
                  }
                }
              },
              "services": {
                "type": "object",
                "description": "Service dependencies (downstream services)",
                "required": [
                  "devices"
                ],
                "properties": {
                  "devices": {
                    "type": "object",
                    "description": "Status of a single dependency",
                    "required": [
                      "status"
                    ],
                    "properties": {
                      "status": {
                        "type": "string",
                        "description": "The status of the dependency",
                        "enum": [
                          "up",
                          "down",
                          "degraded",
                          "unknown"
                        ],
                        "example": "up"
                      },
                      "latencyMs": {
                        "type": "integer",
                        "description": "Latency of the last health check in milliseconds",
                        "minimum": 0,
                        "example": 5
                      },
                      "message": {
                        "type": "string",
                        "description": "Additional information about the dependency status",
                        "example": "Connected to PostgreSQL 16.1"
                      },
                      "lastChecked": {
                        "type": "string",
                        "format": "date-time",
                        "description": "Timestamp of the last health check for this dependency",
                        "example": "2024-01-15T10:30:00Z"
                      },
                      "error": {
                        "type": "string",
                        "description": "Error message if the dependency is unhealthy",
                        "example": "connection refused"
                      },
                      "details": {
                        "type": "object",
                        "description": "Additional dependency-specific details",
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "HealthResponse": {
        "type": "object",
        "description": "Comprehensive health check response with system metrics",
        "required": [
          "status",
          "timestamp",
          "version",
          "uptime",
          "checks"
        ],
        "properties": {
          "status": {
            "type": "string",
            "description": "The overall health status of the service",
            "enum": [
              "ok",
              "degraded",
              "down",
              "maintenance"
            ],
            "example": "ok"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of the health check",
            "example": "2024-01-15T10:30:00Z"
          },
          "version": {
            "type": "object",
            "description": "Version information about the service",
            "required": [
              "api",
              "build"
            ],
            "properties": {
              "api": {
                "type": "string",
                "description": "API version",
                "example": "v1"
              },
              "build": {
                "type": "string",
                "description": "Build version or commit hash",
                "example": "1.0.0-abc1234"
              },
              "go": {
                "type": "string",
                "description": "Go runtime version",
                "example": "go1.25"
              }
            }
          },
          "uptime": {
            "type": "object",
            "description": "Service uptime information",
            "required": [
              "startedAt",
              "duration"
            ],
            "properties": {
              "startedAt": {
                "type": "string",
                "format": "date-time",
                "description": "Timestamp when the service started",
                "example": "2024-01-15T08:00:00Z"
              },
              "duration": {
                "type": "string",
                "description": "Human-readable uptime duration",
                "example": "2h30m15s"
              },
              "durationSeconds": {
                "type": "integer",
                "description": "Uptime in seconds",
                "minimum": 0,
                "example": 9015
              }
            }
          },
          "checks": {
            "type": "object",
            "description": "Status of individual dependency checks grouped by category",
            "required": [
              "infra",
              "services"
            ],
            "properties": {
              "infra": {
                "type": "object",
                "description": "Infrastructure dependencies (storage, cache, etc.)",
                "required": [
                  "storage"
                ],
                "properties": {
                  "storage": {
                    "type": "object",
                    "description": "Status of a single dependency",
                    "required": [
                      "status"
                    ],
                    "properties": {
                      "status": {
                        "type": "string",
                        "description": "The status of the dependency",
                        "enum": [
                          "up",
                          "down",
                          "degraded",
                          "unknown"
                        ],
                        "example": "up"
                      },
                      "latencyMs": {
                        "type": "integer",
                        "description": "Latency of the last health check in milliseconds",
                        "minimum": 0,
                        "example": 5
                      },
                      "message": {
                        "type": "string",
                        "description": "Additional information about the dependency status",
                        "example": "Connected to PostgreSQL 16.1"
                      },
                      "lastChecked": {
                        "type": "string",
                        "format": "date-time",
                        "description": "Timestamp of the last health check for this dependency",
                        "example": "2024-01-15T10:30:00Z"
                      },
                      "error": {
                        "type": "string",
                        "description": "Error message if the dependency is unhealthy",
                        "example": "connection refused"
                      },
                      "details": {
                        "type": "object",
                        "description": "Additional dependency-specific details",
                        "additionalProperties": true
                      }
                    }
                  },
                  "cache": {
                    "allOf": [
                      {
                        "type": "object",
                        "description": "Status of a single dependency",
                        "required": [
                          "status"
                        ],
                        "properties": {
                          "status": {
                            "type": "string",
                            "description": "The status of the dependency",
                            "enum": [
                              "up",
                              "down",
                              "degraded",
                              "unknown"
                            ],
                            "example": "up"
                          },
                          "latencyMs": {
                            "type": "integer",
                            "description": "Latency of the last health check in milliseconds",
                            "minimum": 0,
                            "example": 5
                          },
                          "message": {
                            "type": "string",
                            "description": "Additional information about the dependency status",
                            "example": "Connected to PostgreSQL 16.1"
                          },
                          "lastChecked": {
                            "type": "string",
                            "format": "date-time",
                            "description": "Timestamp of the last health check for this dependency",
                            "example": "2024-01-15T10:30:00Z"
                          },
                          "error": {
                            "type": "string",
                            "description": "Error message if the dependency is unhealthy",
                            "example": "connection refused"
                          },
                          "details": {
                            "type": "object",
                            "description": "Additional dependency-specific details",
                            "additionalProperties": true
                          }
                        }
                      },
                      {
                        "type": "object",
                        "description": "Cache dependency check with pool statistics",
                        "properties": {
                          "details": {
                            "type": "object",
                            "description": "Cache-specific details",
                            "properties": {
                              "totalKeys": {
                                "type": "integer",
                                "description": "Total number of keys in the cache",
                                "minimum": 0,
                                "example": 1024
                              },
                              "poolStats": {
                                "type": "object",
                                "description": "Connection pool statistics",
                                "properties": {
                                  "hits": {
                                    "type": "integer",
                                    "description": "Number of successful pool hits",
                                    "minimum": 0,
                                    "example": 15234
                                  },
                                  "misses": {
                                    "type": "integer",
                                    "description": "Number of pool misses",
                                    "minimum": 0,
                                    "example": 42
                                  },
                                  "timeouts": {
                                    "type": "integer",
                                    "description": "Number of connection timeouts",
                                    "minimum": 0,
                                    "example": 0
                                  },
                                  "waitCount": {
                                    "type": "integer",
                                    "description": "Number of times a connection was waited for",
                                    "minimum": 0,
                                    "example": 128
                                  },
                                  "waitDurationNs": {
                                    "type": "integer",
                                    "description": "Total time spent waiting for connections in nanoseconds",
                                    "minimum": 0,
                                    "example": 5000000
                                  },
                                  "totalConnections": {
                                    "type": "integer",
                                    "description": "Total number of connections in the pool",
                                    "minimum": 0,
                                    "example": 10
                                  },
                                  "idleConnections": {
                                    "type": "integer",
                                    "description": "Number of idle connections in the pool",
                                    "minimum": 0,
                                    "example": 5
                                  },
                                  "staleConnections": {
                                    "type": "integer",
                                    "description": "Number of stale connections removed from the pool",
                                    "minimum": 0,
                                    "example": 2
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    ]
                  }
                }
              },
              "services": {
                "type": "object",
                "description": "Service dependencies (downstream services)",
                "required": [
                  "devices"
                ],
                "properties": {
                  "devices": {
                    "type": "object",
                    "description": "Status of a single dependency",
                    "required": [
                      "status"
                    ],
                    "properties": {
                      "status": {
                        "type": "string",
                        "description": "The status of the dependency",
                        "enum": [
                          "up",
                          "down",
                          "degraded",
                          "unknown"
                        ],
                        "example": "up"
                      },
                      "latencyMs": {
                        "type": "integer",
                        "description": "Latency of the last health check in milliseconds",
                        "minimum": 0,
                        "example": 5
                      },
                      "message": {
                        "type": "string",
                        "description": "Additional information about the dependency status",
                        "example": "Connected to PostgreSQL 16.1"
                      },
                      "lastChecked": {
                        "type": "string",
                        "format": "date-time",
                        "description": "Timestamp of the last health check for this dependency",
                        "example": "2024-01-15T10:30:00Z"
                      },
                      "error": {
                        "type": "string",
                        "description": "Error message if the dependency is unhealthy",
                        "example": "connection refused"
                      },
                      "details": {
                        "type": "object",
                        "description": "Additional dependency-specific details",
                        "additionalProperties": true
                      }
                    }
                  }
                }
              }
            }
          },
          "system": {
            "type": "object",
            "description": "System resource information",
            "properties": {
              "memory": {
                "type": "object",
                "description": "Memory usage information",
                "properties": {
                  "allocMb": {
                    "type": "number",
                    "format": "float",
                    "description": "Current memory allocation in MB",
                    "example": 45.5
                  },
                  "totalAllocMb": {
                    "type": "number",
                    "format": "float",
                    "description": "Total memory allocated since start in MB",
                    "example": 1024.8
                  },
                  "sysMb": {
                    "type": "number",
                    "format": "float",
                    "description": "Total memory obtained from the OS in MB",
                    "example": 72.3
                  },
                  "gcCycles": {
                    "type": "integer",
                    "description": "Number of completed GC cycles",
                    "minimum": 0,
                    "example": 156
                  }
                }
              },
              "goroutines": {
                "type": "integer",
                "description": "Number of active goroutines",
                "minimum": 0,
                "example": 42
              },
              "cpuCores": {
                "type": "integer",
                "description": "Number of CPU cores available",
                "minimum": 1,
                "example": 8
              }
            }
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "description": "Standard error response format",
        "required": [
          "code",
          "message",
          "requestId",
          "timestamp"
        ],
        "properties": {
          "code": {
            "type": "string",
            "description": "Machine-readable error code",
            "example": "VALIDATION_ERROR"
          },
          "message": {
            "type": "string",
            "description": "Human-readable error message",
            "example": "The request body contains invalid data"
          },
          "requestId": {
            "type": "string",
            "format": "uuid",
            "description": "Unique request identifier for tracing",
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "traceId": {
            "type": "string",
            "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
            "example": "0af7651916cd43dd8448eb211c80319c"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the error occurred",
            "example": "2024-01-15T10:30:00Z"
          },
          "details": {
            "type": "array",
            "description": "Additional error details for validation errors",
            "items": {
              "type": "object",
              "description": "Detailed information about a specific error",
              "required": [
                "field",
                "message"
              ],
              "properties": {
                "field": {
                  "type": "string",
                  "description": "The field that caused the error",
                  "example": "name"
                },
                "message": {
                  "type": "string",
                  "description": "Description of what is wrong with the field",
                  "example": "name is required"
                },
                "code": {
                  "type": "string",
                  "description": "Machine-readable error code for this specific error",
                  "example": "REQUIRED_FIELD"
                }
              }
            }
          }
        }
      },
      "Pagination": {
        "type": "object",
        "description": "Pagination metadata for list responses",
        "required": [
          "page",
          "size",
          "totalItems",
          "totalPages"
        ],
        "properties": {
          "page": {
            "type": "integer",
            "description": "Current page number (1-indexed)",
            "minimum": 1,
            "example": 1
          },
          "size": {
            "type": "integer",
            "description": "Number of items per page",
            "minimum": 1,
            "maximum": 100,
            "example": 20
          },
          "totalItems": {
            "type": "integer",
            "description": "Total number of items across all pages",
            "minimum": 0,
            "example": 150
          },
          "totalPages": {
            "type": "integer",
            "description": "Total number of pages",
            "minimum": 0,
            "example": 8
          },
          "hasNext": {
            "type": "boolean",
            "description": "Whether there is a next page",
            "example": true
          },
          "hasPrevious": {
            "type": "boolean",
            "description": "Whether there is a previous page",
            "example": false
          },
          "links": {
            "type": "object",
            "description": "HATEOAS links for pagination navigation",
            "properties": {
              "self": {
                "type": "string",
                "format": "uri-reference",
                "description": "Link to the current page",
                "example": "/devices?page=1&size=20"
              },
              "first": {
                "type": "string",
                "format": "uri-reference",
                "description": "Link to the first page",
                "example": "/devices?page=1&size=20"
              },
              "last": {
                "type": "string",
                "format": "uri-reference",
                "description": "Link to the last page",
                "example": "/devices?page=8&size=20"
              },
              "next": {
                "type": "string",
                "format": "uri-reference",
                "nullable": true,
                "description": "Link to the next page (null if on last page)",
                "example": "/devices?page=2&size=20"
              },
              "previous": {
                "type": "string",
                "format": "uri-reference",
                "nullable": true,
                "description": "Link to the previous page (null if on first page)",
                "example": null
              }
            }
          }
        }
      },
      "DeviceLinks": {
        "type": "object",
        "description": "HATEOAS links for device navigation",
        "properties": {
          "self": {
            "type": "string",
            "format": "uri-reference",
            "description": "Link to this device resource",
            "example": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
          }
        }
      },
      "Device": {
        "type": "object",
        "description": "A device resource",
        "required": [
          "id",
          "name",
          "brand",
          "state",
          "createdAt"
        ],
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "description": "Unique identifier for the device (UUID v7)",
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "name": {
            "type": "string",
            "description": "The name of the device",
            "minLength": 1,
            "maxLength": 255,
            "example": "iPhone 15 Pro"
          },
          "brand": {
            "type": "string",
            "description": "The brand/manufacturer of the device",
            "minLength": 1,
            "maxLength": 100,
            "example": "Apple"
          },
          "state": {
            "type": "string",
            "description": "The current state of the device",
            "enum": [
              "available",
              "in-use",
              "inactive"
            ],
            "example": "available",
            "x-enum-descriptions": {
              "available": "Device is available for use",
              "in-use": "Device is currently being used (name/brand cannot be updated, cannot be deleted)",
              "inactive": "Device is inactive and not available for use"
            }
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the device was created (immutable)",
            "example": "2024-01-15T10:30:00Z"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the device was last updated",
            "example": "2024-01-15T14:45:00Z"
          },
          "links": {
            "type": "object",
            "description": "HATEOAS links for device navigation",
            "properties": {
              "self": {
                "type": "string",
                "format": "uri-reference",
                "description": "Link to this device resource",
                "example": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
              }
            }
          }
        }
      },
      "PaginationLinks": {
        "type": "object",
        "description": "HATEOAS links for pagination navigation",
        "properties": {
          "self": {
            "type": "string",
            "format": "uri-reference",
            "description": "Link to the current page",
            "example": "/devices?page=1&size=20"
          },
          "first": {
            "type": "string",
            "format": "uri-reference",
            "description": "Link to the first page",
            "example": "/devices?page=1&size=20"
          },
          "last": {
            "type": "string",
            "format": "uri-reference",
            "description": "Link to the last page",
            "example": "/devices?page=8&size=20"
          },
          "next": {
            "type": "string",
            "format": "uri-reference",
            "nullable": true,
            "description": "Link to the next page (null if on last page)",
            "example": "/devices?page=2&size=20"
          },
          "previous": {
            "type": "string",
            "format": "uri-reference",
            "nullable": true,
            "description": "Link to the previous page (null if on first page)",
            "example": null
          }
        }
      },
      "AppliedFilters": {
        "type": "object",
        "description": "Filters that were applied to this request",
        "properties": {
          "brand": {
            "type": "string",
            "nullable": true,
            "description": "Brand filter that was applied",
            "example": "Apple"
          },
          "state": {
            "type": "string",
            "nullable": true,
            "description": "State filter that was applied",
            "enum": [
              "available",
              "in-use",
              "inactive"
            ],
            "example": "available"
          }
        }
      },
      "ErrorDetail": {
        "type": "object",
        "description": "Detailed information about a specific error",
        "required": [
          "field",
          "message"
        ],
        "properties": {
          "field": {
            "type": "string",
            "description": "The field that caused the error",
            "example": "name"
          },
          "message": {
            "type": "string",
            "description": "Description of what is wrong with the field",
            "example": "name is required"
          },
          "code": {
            "type": "string",
            "description": "Machine-readable error code for this specific error",
            "example": "REQUIRED_FIELD"
          }
        }
      },
      "DependencyCheck": {
        "type": "object",
        "description": "Status of a single dependency",
        "required": [
          "status"
        ],
        "properties": {
          "status": {
            "type": "string",
            "description": "The status of the dependency",
            "enum": [
              "up",
              "down",
              "degraded",
              "unknown"
            ],
            "example": "up"
          },
          "latencyMs": {
            "type": "integer",
            "description": "Latency of the last health check in milliseconds",
            "minimum": 0,
            "example": 5
          },
          "message": {
            "type": "string",
            "description": "Additional information about the dependency status",
            "example": "Connected to PostgreSQL 16.1"
          },
          "lastChecked": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp of the last health check for this dependency",
            "example": "2024-01-15T10:30:00Z"
          },
          "error": {
            "type": "string",
            "description": "Error message if the dependency is unhealthy",
            "example": "connection refused"
          },
          "details": {
            "type": "object",
            "description": "Additional dependency-specific details",
            "additionalProperties": true
          }
        }
      },
      "PoolStats": {
        "type": "object",
        "description": "Connection pool statistics",
        "properties": {
          "hits": {
            "type": "integer",
            "description": "Number of successful pool hits",
            "minimum": 0,
            "example": 15234
          },
          "misses": {
            "type": "integer",
            "description": "Number of pool misses",
            "minimum": 0,
            "example": 42
          },
          "timeouts": {
            "type": "integer",
            "description": "Number of connection timeouts",
            "minimum": 0,
            "example": 0
          },
          "waitCount": {
            "type": "integer",
            "description": "Number of times a connection was waited for",
            "minimum": 0,
            "example": 128
          },
          "waitDurationNs": {
            "type": "integer",
            "description": "Total time spent waiting for connections in nanoseconds",
            "minimum": 0,
            "example": 5000000
          },
          "totalConnections": {
            "type": "integer",
            "description": "Total number of connections in the pool",
            "minimum": 0,
            "example": 10
          },
          "idleConnections": {
            "type": "integer",
            "description": "Number of idle connections in the pool",
            "minimum": 0,
            "example": 5
          },
          "staleConnections": {
            "type": "integer",
            "description": "Number of stale connections removed from the pool",
            "minimum": 0,
            "example": 2
          }
        }
      },
      "CacheDependencyCheck": {
        "allOf": [
          {
            "type": "object",
            "description": "Status of a single dependency",
            "required": [
              "status"
            ],
            "properties": {
              "status": {
                "type": "string",
                "description": "The status of the dependency",
                "enum": [
                  "up",
                  "down",
                  "degraded",
                  "unknown"
                ],
                "example": "up"
              },
              "latencyMs": {
                "type": "integer",
                "description": "Latency of the last health check in milliseconds",
                "minimum": 0,
                "example": 5
              },
              "message": {
                "type": "string",
                "description": "Additional information about the dependency status",
                "example": "Connected to PostgreSQL 16.1"
              },
              "lastChecked": {
                "type": "string",
                "format": "date-time",
                "description": "Timestamp of the last health check for this dependency",
                "example": "2024-01-15T10:30:00Z"
              },
              "error": {
                "type": "string",
                "description": "Error message if the dependency is unhealthy",
                "example": "connection refused"
              },
              "details": {
                "type": "object",
                "description": "Additional dependency-specific details",
                "additionalProperties": true
              }
            }
          },
          {
            "type": "object",
            "description": "Cache dependency check with pool statistics",
            "properties": {
              "details": {
                "type": "object",
                "description": "Cache-specific details",
                "properties": {
                  "totalKeys": {
                    "type": "integer",
                    "description": "Total number of keys in the cache",
                    "minimum": 0,
                    "example": 1024
                  },
                  "poolStats": {
                    "type": "object",
                    "description": "Connection pool statistics",
                    "properties": {
                      "hits": {
                        "type": "integer",
                        "description": "Number of successful pool hits",
                        "minimum": 0,
                        "example": 15234
                      },
                      "misses": {
                        "type": "integer",
                        "description": "Number of pool misses",
                        "minimum": 0,
                        "example": 42
                      },
                      "timeouts": {
                        "type": "integer",
                        "description": "Number of connection timeouts",
                        "minimum": 0,
                        "example": 0
                      },
                      "waitCount": {
                        "type": "integer",
                        "description": "Number of times a connection was waited for",
                        "minimum": 0,
                        "example": 128
                      },
                      "waitDurationNs": {
                        "type": "integer",
                        "description": "Total time spent waiting for connections in nanoseconds",
                        "minimum": 0,
                        "example": 5000000
                      },
                      "totalConnections": {
                        "type": "integer",
                        "description": "Total number of connections in the pool",
                        "minimum": 0,
                        "example": 10
                      },
                      "idleConnections": {
                        "type": "integer",
                        "description": "Number of idle connections in the pool",
                        "minimum": 0,
                        "example": 5
                      },
                      "staleConnections": {
                        "type": "integer",
                        "description": "Number of stale connections removed from the pool",
                        "minimum": 0,
                        "example": 2
                      }
                    }
                  }
                }
              }
            }
          }
        ]
      },
      "VersionInfo": {
        "type": "object",
        "description": "Version information about the service",
        "required": [
          "api",
          "build"
        ],
        "properties": {
          "api": {
            "type": "string",
            "description": "API version",
            "example": "v1"
          },
          "build": {
            "type": "string",
            "description": "Build version or commit hash",
            "example": "1.0.0-abc1234"
          },
          "go": {
            "type": "string",
            "description": "Go runtime version",
            "example": "go1.25"
          }
        }
      },
      "UptimeInfo": {
        "type": "object",
        "description": "Service uptime information",
        "required": [
          "startedAt",
          "duration"
        ],
        "properties": {
          "startedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Timestamp when the service started",
            "example": "2024-01-15T08:00:00Z"
          },
          "duration": {
            "type": "string",
            "description": "Human-readable uptime duration",
            "example": "2h30m15s"
          },
          "durationSeconds": {
            "type": "integer",
            "description": "Uptime in seconds",
            "minimum": 0,
            "example": 9015
          }
        }
      },
      "MemoryInfo": {
        "type": "object",
        "description": "Memory usage information",
        "properties": {
          "allocMb": {
            "type": "number",
            "format": "float",
            "description": "Current memory allocation in MB",
            "example": 45.5
          },
          "totalAllocMb": {
            "type": "number",
            "format": "float",
            "description": "Total memory allocated since start in MB",
            "example": 1024.8
          },
          "sysMb": {
            "type": "number",
            "format": "float",
            "description": "Total memory obtained from the OS in MB",
            "example": 72.3
          },
          "gcCycles": {
            "type": "integer",
            "description": "Number of completed GC cycles",
            "minimum": 0,
            "example": 156
          }
        }
      },
      "SystemInfo": {
        "type": "object",
        "description": "System resource information",
        "properties": {
          "memory": {
            "type": "object",
            "description": "Memory usage information",
            "properties": {
              "allocMb": {
                "type": "number",
                "format": "float",
                "description": "Current memory allocation in MB",
                "example": 45.5
              },
              "totalAllocMb": {
                "type": "number",
                "format": "float",
                "description": "Total memory allocated since start in MB",
                "example": 1024.8
              },
              "sysMb": {
                "type": "number",
                "format": "float",
                "description": "Total memory obtained from the OS in MB",
                "example": 72.3
              },
              "gcCycles": {
                "type": "integer",
                "description": "Number of completed GC cycles",
                "minimum": 0,
                "example": 156
              }
            }
          },
          "goroutines": {
            "type": "integer",
            "description": "Number of active goroutines",
            "minimum": 0,
            "example": 42
          },
          "cpuCores": {
            "type": "integer",
            "description": "Number of CPU cores available",
            "minimum": 1,
            "example": 8
          }
        }
      }
    },
    "examples": {
      "list": {
        "summary": "List of devices",
        "value": {
          "data": [
            {
              "id": "019234a5-6b7c-8d9e-0f12-34567890abcd",
              "name": "iPhone 15 Pro",
              "brand": "Apple",
              "state": "available",
              "createdAt": "2024-01-15T10:30:00Z",
              "updatedAt": "2024-01-15T10:30:00Z",
              "links": {
                "self": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
              }
            },
            {
              "id": "019234a5-6b7c-8d9e-0f12-34567890abce",
              "name": "Galaxy S24 Ultra",
              "brand": "Samsung",
              "state": "in-use",
              "createdAt": "2024-01-14T08:15:00Z",
              "updatedAt": "2024-01-15T09:00:00Z",
              "links": {
                "self": "/devices/019234a5-6b7c-8d9e-0f12-34567890abce"
              }
            },
            {
              "id": "019234a5-6b7c-8d9e-0f12-34567890abcf",
              "name": "Pixel 8 Pro",
              "brand": "Google",
              "state": "inactive",
              "createdAt": "2024-01-13T14:20:00Z",
              "updatedAt": "2024-01-13T14:20:00Z",
              "links": {
                "self": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcf"
              }
            }
          ],
          "pagination": {
            "page": 1,
            "size": 20,
            "totalItems": 3,
            "totalPages": 1,
            "hasNext": false,
            "hasPrevious": false,
            "links": {
              "self": "/devices?page=1&size=20",
              "first": "/devices?page=1&size=20",
              "last": "/devices?page=1&size=20",
              "next": null,
              "previous": null
            }
          },
          "filters": {
            "brand": null,
            "state": null
          }
        }
      },
      "basic": {
        "summary": "Create a new device with default state",
        "value": {
          "name": "iPhone 15 Pro",
          "brand": "Apple"
        }
      },
      "created": {
        "summary": "Newly created device",
        "value": {
          "data": {
            "id": "019234a5-6b7c-8d9e-0f12-34567890abcd",
            "name": "iPhone 15 Pro",
            "brand": "Apple",
            "state": "available",
            "createdAt": "2024-01-15T10:30:00Z",
            "updatedAt": "2024-01-15T10:30:00Z",
            "links": {
              "self": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
            }
          }
        }
      },
      "device": {
        "summary": "Existing device",
        "value": {
          "data": {
            "id": "019234a5-6b7c-8d9e-0f12-34567890abcd",
            "name": "iPhone 15 Pro",
            "brand": "Apple",
            "state": "in-use",
            "createdAt": "2024-01-15T10:30:00Z",
            "updatedAt": "2024-01-15T14:45:00Z",
            "links": {
              "self": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
            }
          }
        }
      },
      "full": {
        "summary": "Fully update a device",
        "value": {
          "name": "iPhone 15 Pro Max",
          "brand": "Apple",
          "state": "in-use"
        }
      },
      "updated": {
        "summary": "Updated device",
        "value": {
          "data": {
            "id": "019234a5-6b7c-8d9e-0f12-34567890abcd",
            "name": "iPhone 15 Pro Max",
            "brand": "Apple",
            "state": "in-use",
            "createdAt": "2024-01-15T10:30:00Z",
            "updatedAt": "2024-01-15T16:20:00Z",
            "links": {
              "self": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
            }
          }
        }
      },
      "patch_state": {
        "summary": "Update only the device state",
        "value": {
          "state": "inactive"
        }
      },
      "patch_name": {
        "summary": "Update only the device name",
        "value": {
          "name": "iPhone 15 Pro Max 256GB"
        }
      },
      "patched": {
        "summary": "Partially updated device",
        "value": {
          "data": {
            "id": "019234a5-6b7c-8d9e-0f12-34567890abcd",
            "name": "iPhone 15 Pro",
            "brand": "Apple",
            "state": "inactive",
            "createdAt": "2024-01-15T10:30:00Z",
            "updatedAt": "2024-01-15T18:00:00Z",
            "links": {
              "self": "/devices/019234a5-6b7c-8d9e-0f12-34567890abcd"
            }
          }
        }
      },
      "ok": {
        "summary": "Service is alive and healthy",
        "value": {
          "status": "ok",
          "timestamp": "2024-01-15T10:30:00Z",
          "version": "v1.0.0"
        }
      },
      "down": {
        "summary": "Service is not alive",
        "value": {
          "status": "down",
          "timestamp": "2024-01-15T10:30:00Z",
          "version": "v1.0.0"
        }
      },
      "readiness_response_ok": {
        "summary": "Service is ready to accept traffic",
        "value": {
          "status": "ok",
          "timestamp": "2024-01-15T10:30:00Z",
          "version": "v1.0.0",
          "checks": {
            "infra": {
              "storage": {
                "status": "up",
                "latencyMs": 5,
                "message": "Connected to PostgreSQL 16.1",
                "lastChecked": "2024-01-15T10:30:00Z"
              },
              "cache": {
                "status": "up",
                "latencyMs": 1,
                "message": "Redis connected",
                "lastChecked": "2024-01-15T10:30:00Z",
                "details": {
                  "totalKeys": 1024,
                  "poolStats": {
                    "hits": 15234,
                    "misses": 42,
                    "timeouts": 0,
                    "waitCount": 128,
                    "waitDurationNs": 5000000,
                    "totalConnections": 10,
                    "idleConnections": 5,
                    "staleConnections": 2
                  }
                }
              }
            },
            "services": {
              "devices": {
                "status": "up",
                "latencyMs": 2,
                "message": "gRPC connection established",
                "lastChecked": "2024-01-15T10:30:00Z"
              }
            }
          }
        }
      },
      "readiness_response_down": {
        "summary": "Service is not ready (storage down)",
        "value": {
          "status": "down",
          "timestamp": "2024-01-15T10:30:00Z",
          "version": "v1.0.0",
          "checks": {
            "infra": {
              "storage": {
                "status": "down",
                "latencyMs": 0,
                "message": "Connection refused",
                "lastChecked": "2024-01-15T10:30:00Z",
                "error": "dial tcp 127.0.0.1:5432: connection refused"
              },
              "cache": {
                "status": "up",
                "latencyMs": 1,
                "message": "Redis connected",
                "lastChecked": "2024-01-15T10:30:00Z",
                "details": {
                  "totalKeys": 1024,
                  "poolStats": {
                    "hits": 15234,
                    "misses": 42,
                    "timeouts": 0,
                    "waitCount": 128,
                    "waitDurationNs": 5000000,
                    "totalConnections": 10,
                    "idleConnections": 5,
                    "staleConnections": 2
                  }
                }
              }
            },
            "services": {
              "devices": {
                "status": "up",
                "latencyMs": 2,
                "message": "gRPC connection established",
                "lastChecked": "2024-01-15T10:30:00Z"
              }
            }
          }
        }
      },
      "health_response_ok": {
        "summary": "Service is healthy",
        "value": {
          "status": "ok",
          "timestamp": "2024-01-15T10:30:00Z",
          "version": {
            "api": "v1",
            "build": "1.0.0-abc1234",
            "go": "go1.25"
          },
          "uptime": {
            "startedAt": "2024-01-15T08:00:00Z",
            "duration": "2h30m15s",
            "durationSeconds": 9015
          },
          "checks": {
            "infra": {
              "storage": {
                "status": "up",
                "latencyMs": 5,
                "message": "Connected to PostgreSQL 16.1",
                "lastChecked": "2024-01-15T10:30:00Z"
              },
              "cache": {
                "status": "up",
                "latencyMs": 1,
                "message": "Redis connected",
                "lastChecked": "2024-01-15T10:30:00Z",
                "details": {
                  "totalKeys": 1024,
                  "poolStats": {
                    "hits": 15234,
                    "misses": 42,
                    "timeouts": 0,
                    "waitCount": 128,
                    "waitDurationNs": 5000000,
                    "totalConnections": 10,
                    "idleConnections": 5,
                    "staleConnections": 2
                  }
                }
              }
            },
            "services": {
              "devices": {
                "status": "up",
                "latencyMs": 2,
                "message": "gRPC connection established",
                "lastChecked": "2024-01-15T10:30:00Z"
              }
            }
          },
          "system": {
            "memory": {
              "allocMb": 45.5,
              "totalAllocMb": 1024.8,
              "sysMb": 72.3,
              "gcCycles": 156
            },
            "goroutines": 42,
            "cpuCores": 8
          }
        }
      },
      "health_response_down": {
        "summary": "Service is unhealthy",
        "value": {
          "status": "down",
          "timestamp": "2024-01-15T10:30:00Z",
          "version": {
            "api": "v1",
            "build": "1.0.0-abc1234",
            "go": "go1.25"
          },
          "uptime": {
            "startedAt": "2024-01-15T08:00:00Z",
            "duration": "2h30m15s",
            "durationSeconds": 9015
          },
          "checks": {
            "infra": {
              "storage": {
                "status": "down",
                "latencyMs": 0,
                "message": "Connection refused",
                "lastChecked": "2024-01-15T10:30:00Z",
                "error": "dial tcp 127.0.0.1:5432: connection refused"
              },
              "cache": {
                "status": "up",
                "latencyMs": 1,
                "message": "Redis connected",
                "lastChecked": "2024-01-15T10:30:00Z",
                "details": {
                  "totalKeys": 1024,
                  "poolStats": {
                    "hits": 15234,
                    "misses": 42,
                    "timeouts": 0,
                    "waitCount": 128,
                    "waitDurationNs": 5000000,
                    "totalConnections": 10,
                    "idleConnections": 5,
                    "staleConnections": 2
                  }
                }
              }
            },
            "services": {
              "devices": {
                "status": "up",
                "latencyMs": 2,
                "message": "gRPC connection established",
                "lastChecked": "2024-01-15T10:30:00Z"
              }
            }
          },
          "system": {
            "memory": {
              "allocMb": 45.5,
              "totalAllocMb": 1024.8,
              "sysMb": 72.3,
              "gcCycles": 156
            },
            "goroutines": 42,
            "cpuCores": 8
          }
        }
      }
    },
    "responses": {
      "bad_request": {
        "description": "Bad Request - The request was malformed or contains invalid syntax",
        "headers": {
          "API-Version": {
            "description": "API version used for this response",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ]
            },
            "example": "v1"
          },
          "Request-Id": {
            "description": "Unique request identifier for tracing (per-request, always generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "Correlation-Id": {
            "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "traceparent": {
            "description": "W3C Trace Context parent header for distributed tracing",
            "schema": {
              "type": "string"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          "tracestate": {
            "description": "W3C Trace Context state header for vendor-specific trace data",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE"
          }
        },
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "description": "Standard error response format",
              "required": [
                "code",
                "message",
                "requestId",
                "timestamp"
              ],
              "properties": {
                "code": {
                  "type": "string",
                  "description": "Machine-readable error code",
                  "example": "VALIDATION_ERROR"
                },
                "message": {
                  "type": "string",
                  "description": "Human-readable error message",
                  "example": "The request body contains invalid data"
                },
                "requestId": {
                  "type": "string",
                  "format": "uuid",
                  "description": "Unique request identifier for tracing",
                  "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                },
                "traceId": {
                  "type": "string",
                  "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                  "example": "0af7651916cd43dd8448eb211c80319c"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the error occurred",
                  "example": "2024-01-15T10:30:00Z"
                },
                "details": {
                  "type": "array",
                  "description": "Additional error details for validation errors",
                  "items": {
                    "type": "object",
                    "description": "Detailed information about a specific error",
                    "required": [
                      "field",
                      "message"
                    ],
                    "properties": {
                      "field": {
                        "type": "string",
                        "description": "The field that caused the error",
                        "example": "name"
                      },
                      "message": {
                        "type": "string",
                        "description": "Description of what is wrong with the field",
                        "example": "name is required"
                      },
                      "code": {
                        "type": "string",
                        "description": "Machine-readable error code for this specific error",
                        "example": "REQUIRED_FIELD"
                      }
                    }
                  }
                }
              }
            },
            "examples": {
              "invalid_json": {
                "summary": "Invalid JSON syntax",
                "value": {
                  "code": "BAD_REQUEST",
                  "message": "Invalid JSON syntax in request body",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z"
                }
              },
              "missing_content_type": {
                "summary": "Missing Content-Type header",
                "value": {
                  "code": "BAD_REQUEST",
                  "message": "Content-Type header must be application/json",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z"
                }
              }
            }
          }
        }
      },
      "unauthorized": {
        "description": "Unauthorized - Authentication is required or has failed",
        "headers": {
          "API-Version": {
            "description": "API version used for this response",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ]
            },
            "example": "v1"
          },
          "Request-Id": {
            "description": "Unique request identifier for tracing (per-request, always generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "Correlation-Id": {
            "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "traceparent": {
            "description": "W3C Trace Context parent header for distributed tracing",
            "schema": {
              "type": "string"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          "tracestate": {
            "description": "W3C Trace Context state header for vendor-specific trace data",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE"
          },
          "WWW-Authenticate": {
            "description": "Authentication scheme information",
            "schema": {
              "type": "string"
            },
            "example": "Bearer realm=\"devices-api\""
          }
        },
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "description": "Standard error response format",
              "required": [
                "code",
                "message",
                "requestId",
                "timestamp"
              ],
              "properties": {
                "code": {
                  "type": "string",
                  "description": "Machine-readable error code",
                  "example": "VALIDATION_ERROR"
                },
                "message": {
                  "type": "string",
                  "description": "Human-readable error message",
                  "example": "The request body contains invalid data"
                },
                "requestId": {
                  "type": "string",
                  "format": "uuid",
                  "description": "Unique request identifier for tracing",
                  "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                },
                "traceId": {
                  "type": "string",
                  "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                  "example": "0af7651916cd43dd8448eb211c80319c"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the error occurred",
                  "example": "2024-01-15T10:30:00Z"
                },
                "details": {
                  "type": "array",
                  "description": "Additional error details for validation errors",
                  "items": {
                    "type": "object",
                    "description": "Detailed information about a specific error",
                    "required": [
                      "field",
                      "message"
                    ],
                    "properties": {
                      "field": {
                        "type": "string",
                        "description": "The field that caused the error",
                        "example": "name"
                      },
                      "message": {
                        "type": "string",
                        "description": "Description of what is wrong with the field",
                        "example": "name is required"
                      },
                      "code": {
                        "type": "string",
                        "description": "Machine-readable error code for this specific error",
                        "example": "REQUIRED_FIELD"
                      }
                    }
                  }
                }
              }
            },
            "examples": {
              "missing_token": {
                "summary": "Missing authentication token",
                "value": {
                  "code": "UNAUTHORIZED",
                  "message": "Authentication token is required",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z"
                }
              },
              "invalid_token": {
                "summary": "Invalid or expired token",
                "value": {
                  "code": "UNAUTHORIZED",
                  "message": "Authentication token is invalid or expired",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z"
                }
              }
            }
          }
        }
      },
      "not_acceptable": {
        "description": "Not Acceptable - The requested media type is not supported",
        "headers": {
          "API-Version": {
            "description": "API version used for this response",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ]
            },
            "example": "v1"
          },
          "Request-Id": {
            "description": "Unique request identifier for tracing (per-request, always generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "Correlation-Id": {
            "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "traceparent": {
            "description": "W3C Trace Context parent header for distributed tracing",
            "schema": {
              "type": "string"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          "tracestate": {
            "description": "W3C Trace Context state header for vendor-specific trace data",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE"
          }
        },
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "description": "Standard error response format",
              "required": [
                "code",
                "message",
                "requestId",
                "timestamp"
              ],
              "properties": {
                "code": {
                  "type": "string",
                  "description": "Machine-readable error code",
                  "example": "VALIDATION_ERROR"
                },
                "message": {
                  "type": "string",
                  "description": "Human-readable error message",
                  "example": "The request body contains invalid data"
                },
                "requestId": {
                  "type": "string",
                  "format": "uuid",
                  "description": "Unique request identifier for tracing",
                  "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                },
                "traceId": {
                  "type": "string",
                  "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                  "example": "0af7651916cd43dd8448eb211c80319c"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the error occurred",
                  "example": "2024-01-15T10:30:00Z"
                },
                "details": {
                  "type": "array",
                  "description": "Additional error details for validation errors",
                  "items": {
                    "type": "object",
                    "description": "Detailed information about a specific error",
                    "required": [
                      "field",
                      "message"
                    ],
                    "properties": {
                      "field": {
                        "type": "string",
                        "description": "The field that caused the error",
                        "example": "name"
                      },
                      "message": {
                        "type": "string",
                        "description": "Description of what is wrong with the field",
                        "example": "name is required"
                      },
                      "code": {
                        "type": "string",
                        "description": "Machine-readable error code for this specific error",
                        "example": "REQUIRED_FIELD"
                      }
                    }
                  }
                }
              }
            },
            "examples": {
              "unsupported_media_type": {
                "summary": "Requested media type not supported",
                "value": {
                  "code": "NOT_ACCEPTABLE",
                  "message": "The requested media type is not supported. Supported: application/json",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z",
                  "details": [
                    {
                      "field": "Accept",
                      "message": "Unsupported media type: application/xml",
                      "code": "UNSUPPORTED_MEDIA_TYPE"
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "rate_limit": {
        "description": "Too Many Requests - Rate limit has been exceeded",
        "headers": {
          "API-Version": {
            "description": "API version used for this response",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ]
            },
            "example": "v1"
          },
          "Request-Id": {
            "description": "Unique request identifier for tracing (per-request, always generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "Correlation-Id": {
            "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "traceparent": {
            "description": "W3C Trace Context parent header for distributed tracing",
            "schema": {
              "type": "string"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          "tracestate": {
            "description": "W3C Trace Context state header for vendor-specific trace data",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE"
          },
          "Retry-After": {
            "description": "Number of seconds to wait before retrying the request",
            "schema": {
              "type": "integer"
            },
            "example": 60
          },
          "RateLimit-Limit": {
            "description": "Maximum number of requests allowed per time window (RFC 6648 compliant)",
            "schema": {
              "type": "integer"
            },
            "example": 100
          },
          "RateLimit-Remaining": {
            "description": "Number of requests remaining in the current time window (RFC 6648 compliant)",
            "schema": {
              "type": "integer"
            },
            "example": 95
          },
          "RateLimit-Reset": {
            "description": "Unix timestamp (seconds) when the rate limit window resets (RFC 6648 compliant)",
            "schema": {
              "type": "integer"
            },
            "example": 1705320000
          }
        },
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "description": "Standard error response format",
              "required": [
                "code",
                "message",
                "requestId",
                "timestamp"
              ],
              "properties": {
                "code": {
                  "type": "string",
                  "description": "Machine-readable error code",
                  "example": "VALIDATION_ERROR"
                },
                "message": {
                  "type": "string",
                  "description": "Human-readable error message",
                  "example": "The request body contains invalid data"
                },
                "requestId": {
                  "type": "string",
                  "format": "uuid",
                  "description": "Unique request identifier for tracing",
                  "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                },
                "traceId": {
                  "type": "string",
                  "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                  "example": "0af7651916cd43dd8448eb211c80319c"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the error occurred",
                  "example": "2024-01-15T10:30:00Z"
                },
                "details": {
                  "type": "array",
                  "description": "Additional error details for validation errors",
                  "items": {
                    "type": "object",
                    "description": "Detailed information about a specific error",
                    "required": [
                      "field",
                      "message"
                    ],
                    "properties": {
                      "field": {
                        "type": "string",
                        "description": "The field that caused the error",
                        "example": "name"
                      },
                      "message": {
                        "type": "string",
                        "description": "Description of what is wrong with the field",
                        "example": "name is required"
                      },
                      "code": {
                        "type": "string",
                        "description": "Machine-readable error code for this specific error",
                        "example": "REQUIRED_FIELD"
                      }
                    }
                  }
                }
              }
            },
            "examples": {
              "rate_limited": {
                "summary": "Rate limit exceeded",
                "value": {
                  "code": "RATE_LIMIT_EXCEEDED",
                  "message": "Rate limit exceeded. Please retry after 60 seconds",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z"
                }
              }
            }
          }
        }
      },
      "server_error": {
        "description": "Internal Server Error - An unexpected error occurred",
        "headers": {
          "API-Version": {
            "description": "API version used for this response",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ]
            },
            "example": "v1"
          },
          "Request-Id": {
            "description": "Unique request identifier for tracing (per-request, always generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "Correlation-Id": {
            "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "traceparent": {
            "description": "W3C Trace Context parent header for distributed tracing",
            "schema": {
              "type": "string"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          "tracestate": {
            "description": "W3C Trace Context state header for vendor-specific trace data",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE"
          }
        },
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "description": "Standard error response format",
              "required": [
                "code",
                "message",
                "requestId",
                "timestamp"
              ],
              "properties": {
                "code": {
                  "type": "string",
                  "description": "Machine-readable error code",
                  "example": "VALIDATION_ERROR"
                },
                "message": {
                  "type": "string",
                  "description": "Human-readable error message",
                  "example": "The request body contains invalid data"
                },
                "requestId": {
                  "type": "string",
                  "format": "uuid",
                  "description": "Unique request identifier for tracing",
                  "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                },
                "traceId": {
                  "type": "string",
                  "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                  "example": "0af7651916cd43dd8448eb211c80319c"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the error occurred",
                  "example": "2024-01-15T10:30:00Z"
                },
                "details": {
                  "type": "array",
                  "description": "Additional error details for validation errors",
                  "items": {
                    "type": "object",
                    "description": "Detailed information about a specific error",
                    "required": [
                      "field",
                      "message"
                    ],
                    "properties": {
                      "field": {
                        "type": "string",
                        "description": "The field that caused the error",
                        "example": "name"
                      },
                      "message": {
                        "type": "string",
                        "description": "Description of what is wrong with the field",
                        "example": "name is required"
                      },
                      "code": {
                        "type": "string",
                        "description": "Machine-readable error code for this specific error",
                        "example": "REQUIRED_FIELD"
                      }
                    }
                  }
                }
              }
            },
            "examples": {
              "internal_error": {
                "summary": "Internal server error",
                "value": {
                  "code": "INTERNAL_ERROR",
                  "message": "An unexpected error occurred. Please try again later",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z"
                }
              },
              "database_error": {
                "summary": "Database connection error",
                "value": {
                  "code": "INTERNAL_ERROR",
                  "message": "Service temporarily unavailable. Please try again later",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z"
                }
              }
            }
          }
        }
      },
      "unprocessable_entity": {
        "description": "Unprocessable Entity - The request was well-formed but contains semantic errors",
        "headers": {
          "API-Version": {
            "description": "API version used for this response",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ]
            },
            "example": "v1"
          },
          "Request-Id": {
            "description": "Unique request identifier for tracing (per-request, always generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "Correlation-Id": {
            "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "traceparent": {
            "description": "W3C Trace Context parent header for distributed tracing",
            "schema": {
              "type": "string"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          "tracestate": {
            "description": "W3C Trace Context state header for vendor-specific trace data",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE"
          }
        },
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "description": "Standard error response format",
              "required": [
                "code",
                "message",
                "requestId",
                "timestamp"
              ],
              "properties": {
                "code": {
                  "type": "string",
                  "description": "Machine-readable error code",
                  "example": "VALIDATION_ERROR"
                },
                "message": {
                  "type": "string",
                  "description": "Human-readable error message",
                  "example": "The request body contains invalid data"
                },
                "requestId": {
                  "type": "string",
                  "format": "uuid",
                  "description": "Unique request identifier for tracing",
                  "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                },
                "traceId": {
                  "type": "string",
                  "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                  "example": "0af7651916cd43dd8448eb211c80319c"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the error occurred",
                  "example": "2024-01-15T10:30:00Z"
                },
                "details": {
                  "type": "array",
                  "description": "Additional error details for validation errors",
                  "items": {
                    "type": "object",
                    "description": "Detailed information about a specific error",
                    "required": [
                      "field",
                      "message"
                    ],
                    "properties": {
                      "field": {
                        "type": "string",
                        "description": "The field that caused the error",
                        "example": "name"
                      },
                      "message": {
                        "type": "string",
                        "description": "Description of what is wrong with the field",
                        "example": "name is required"
                      },
                      "code": {
                        "type": "string",
                        "description": "Machine-readable error code for this specific error",
                        "example": "REQUIRED_FIELD"
                      }
                    }
                  }
                }
              }
            },
            "examples": {
              "validation_error": {
                "summary": "Validation errors",
                "value": {
                  "code": "VALIDATION_ERROR",
                  "message": "The request body contains validation errors",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z",
                  "details": [
                    {
                      "field": "name",
                      "message": "name is required",
                      "code": "REQUIRED_FIELD"
                    },
                    {
                      "field": "brand",
                      "message": "brand must be between 1 and 100 characters",
                      "code": "INVALID_LENGTH"
                    }
                  ]
                }
              },
              "invalid_state": {
                "summary": "Invalid state value",
                "value": {
                  "code": "VALIDATION_ERROR",
                  "message": "The request body contains validation errors",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z",
                  "details": [
                    {
                      "field": "state",
                      "message": "state must be one of: available, in-use, inactive",
                      "code": "INVALID_ENUM_VALUE"
                    }
                  ]
                }
              },
              "invalid_uuid": {
                "summary": "Invalid UUID format",
                "value": {
                  "code": "VALIDATION_ERROR",
                  "message": "The request contains an invalid identifier",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z",
                  "details": [
                    {
                      "field": "deviceId",
                      "message": "deviceId must be a valid UUID",
                      "code": "INVALID_FORMAT"
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "not_found": {
        "description": "Not Found - The requested resource does not exist",
        "headers": {
          "API-Version": {
            "description": "API version used for this response",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ]
            },
            "example": "v1"
          },
          "Request-Id": {
            "description": "Unique request identifier for tracing (per-request, always generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "Correlation-Id": {
            "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "traceparent": {
            "description": "W3C Trace Context parent header for distributed tracing",
            "schema": {
              "type": "string"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          "tracestate": {
            "description": "W3C Trace Context state header for vendor-specific trace data",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE"
          }
        },
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "description": "Standard error response format",
              "required": [
                "code",
                "message",
                "requestId",
                "timestamp"
              ],
              "properties": {
                "code": {
                  "type": "string",
                  "description": "Machine-readable error code",
                  "example": "VALIDATION_ERROR"
                },
                "message": {
                  "type": "string",
                  "description": "Human-readable error message",
                  "example": "The request body contains invalid data"
                },
                "requestId": {
                  "type": "string",
                  "format": "uuid",
                  "description": "Unique request identifier for tracing",
                  "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                },
                "traceId": {
                  "type": "string",
                  "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                  "example": "0af7651916cd43dd8448eb211c80319c"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the error occurred",
                  "example": "2024-01-15T10:30:00Z"
                },
                "details": {
                  "type": "array",
                  "description": "Additional error details for validation errors",
                  "items": {
                    "type": "object",
                    "description": "Detailed information about a specific error",
                    "required": [
                      "field",
                      "message"
                    ],
                    "properties": {
                      "field": {
                        "type": "string",
                        "description": "The field that caused the error",
                        "example": "name"
                      },
                      "message": {
                        "type": "string",
                        "description": "Description of what is wrong with the field",
                        "example": "name is required"
                      },
                      "code": {
                        "type": "string",
                        "description": "Machine-readable error code for this specific error",
                        "example": "REQUIRED_FIELD"
                      }
                    }
                  }
                }
              }
            },
            "examples": {
              "device_not_found": {
                "summary": "Device not found",
                "value": {
                  "code": "NOT_FOUND",
                  "message": "Device with ID '019234a5-6b7c-8d9e-0f12-34567890abcd' not found",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z"
                }
              }
            }
          }
        }
      },
      "conflict": {
        "description": "Conflict - The request conflicts with the current state of the resource",
        "headers": {
          "API-Version": {
            "description": "API version used for this response",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ]
            },
            "example": "v1"
          },
          "Request-Id": {
            "description": "Unique request identifier for tracing (per-request, always generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "Correlation-Id": {
            "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "traceparent": {
            "description": "W3C Trace Context parent header for distributed tracing",
            "schema": {
              "type": "string"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          "tracestate": {
            "description": "W3C Trace Context state header for vendor-specific trace data",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE"
          }
        },
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "description": "Standard error response format",
              "required": [
                "code",
                "message",
                "requestId",
                "timestamp"
              ],
              "properties": {
                "code": {
                  "type": "string",
                  "description": "Machine-readable error code",
                  "example": "VALIDATION_ERROR"
                },
                "message": {
                  "type": "string",
                  "description": "Human-readable error message",
                  "example": "The request body contains invalid data"
                },
                "requestId": {
                  "type": "string",
                  "format": "uuid",
                  "description": "Unique request identifier for tracing",
                  "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                },
                "traceId": {
                  "type": "string",
                  "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                  "example": "0af7651916cd43dd8448eb211c80319c"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the error occurred",
                  "example": "2024-01-15T10:30:00Z"
                },
                "details": {
                  "type": "array",
                  "description": "Additional error details for validation errors",
                  "items": {
                    "type": "object",
                    "description": "Detailed information about a specific error",
                    "required": [
                      "field",
                      "message"
                    ],
                    "properties": {
                      "field": {
                        "type": "string",
                        "description": "The field that caused the error",
                        "example": "name"
                      },
                      "message": {
                        "type": "string",
                        "description": "Description of what is wrong with the field",
                        "example": "name is required"
                      },
                      "code": {
                        "type": "string",
                        "description": "Machine-readable error code for this specific error",
                        "example": "REQUIRED_FIELD"
                      }
                    }
                  }
                }
              }
            },
            "examples": {
              "device_in_use_delete": {
                "summary": "Cannot delete device that is in use",
                "value": {
                  "code": "CONFLICT",
                  "message": "Cannot delete device: device is currently in use",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z"
                }
              },
              "device_in_use_update": {
                "summary": "Cannot update name/brand of device that is in use",
                "value": {
                  "code": "CONFLICT",
                  "message": "Cannot update name or brand: device is currently in use",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z",
                  "details": [
                    {
                      "field": "name",
                      "message": "Cannot be updated while device is in use",
                      "code": "IMMUTABLE_FIELD"
                    },
                    {
                      "field": "brand",
                      "message": "Cannot be updated while device is in use",
                      "code": "IMMUTABLE_FIELD"
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "precondition_failed": {
        "description": "Precondition Failed - The If-Match header condition was not met",
        "headers": {
          "API-Version": {
            "description": "API version used for this response",
            "schema": {
              "type": "string",
              "enum": [
                "v1"
              ]
            },
            "example": "v1"
          },
          "Request-Id": {
            "description": "Unique request identifier for tracing (per-request, always generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "Correlation-Id": {
            "description": "Correlation identifier for tracing requests across multiple services (can be provided by client or generated server-side)",
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
          },
          "traceparent": {
            "description": "W3C Trace Context parent header for distributed tracing",
            "schema": {
              "type": "string"
            },
            "example": "00-0af7651916cd43dd8448eb211c80319c-b7ad6b7169203331-01"
          },
          "tracestate": {
            "description": "W3C Trace Context state header for vendor-specific trace data",
            "schema": {
              "type": "string"
            },
            "example": "congo=t61rcWkgMzE"
          },
          "ETag": {
            "description": "Entity tag for cache validation and optimistic concurrency control.\nUse this value in If-Match or If-None-Match headers for subsequent requests.\n",
            "schema": {
              "type": "string"
            },
            "example": "\"a1b2c3d4e5f6\""
          }
        },
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "description": "Standard error response format",
              "required": [
                "code",
                "message",
                "requestId",
                "timestamp"
              ],
              "properties": {
                "code": {
                  "type": "string",
                  "description": "Machine-readable error code",
                  "example": "VALIDATION_ERROR"
                },
                "message": {
                  "type": "string",
                  "description": "Human-readable error message",
                  "example": "The request body contains invalid data"
                },
                "requestId": {
                  "type": "string",
                  "format": "uuid",
                  "description": "Unique request identifier for tracing",
                  "example": "019234a5-6b7c-8d9e-0f12-34567890abcd"
                },
                "traceId": {
                  "type": "string",
                  "description": "W3C Trace Context trace ID for distributed tracing (from traceparent header)",
                  "example": "0af7651916cd43dd8448eb211c80319c"
                },
                "timestamp": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Timestamp when the error occurred",
                  "example": "2024-01-15T10:30:00Z"
                },
                "details": {
                  "type": "array",
                  "description": "Additional error details for validation errors",
                  "items": {
                    "type": "object",
                    "description": "Detailed information about a specific error",
                    "required": [
                      "field",
                      "message"
                    ],
                    "properties": {
                      "field": {
                        "type": "string",
                        "description": "The field that caused the error",
                        "example": "name"
                      },
                      "message": {
                        "type": "string",
                        "description": "Description of what is wrong with the field",
                        "example": "name is required"
                      },
                      "code": {
                        "type": "string",
                        "description": "Machine-readable error code for this specific error",
                        "example": "REQUIRED_FIELD"
                      }
                    }
                  }
                }
              }
            },
            "examples": {
              "etag_mismatch": {
                "summary": "ETag mismatch - resource was modified",
                "value": {
                  "code": "PRECONDITION_FAILED",
                  "message": "Resource has been modified since last retrieval",
                  "requestId": "019234a5-6b7c-8d9e-0f12-34567890abcd",
                  "traceId": "0af7651916cd43dd8448eb211c80319c",
                  "timestamp": "2024-01-15T10:30:00Z",
                  "details": [
                    {
                      "field": "If-Match",
                      "message": "Provided ETag does not match current resource version",
                      "code": "ETAG_MISMATCH"
                    }
                  ]
                }
              }
            }
          }
        }
      }
    }
  }
}